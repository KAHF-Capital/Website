(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[656],{57041:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scanner",function(){return s(79197)}])},79197:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(85893),r=s(67294),l=s(41664),n=s.n(l),i=s(84282),c=s(42371),o=s(61929),d=s(62190),x=e=>{let{label:t,value:s,onChange:l,min:n=0,max:i=1e9,step:c=1e6,formatValue:x=e=>e,unit:m="",onRemove:h,removable:u=!1}=e,[g,p]=(0,r.useState)(!1),[j,f]=(0,r.useState)({x:0,value:0}),y=(0,r.useRef)(null),[v,N]=(0,r.useState)(s);(0,r.useEffect)(()=>{N(s)},[s]);let b=e=>{if(!g)return;let t=e.clientX-j.x,s=(i-n)/200,a=Math.max(n,Math.min(i,j.value+t*s));N(a),l(Math.round(a/c)*c)},w=()=>{p(!1)};(0,r.useEffect)(()=>{if(g)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)}},[g,j]);let k=(v-n)/(i-n)*100;return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:t})]}),u&&h&&(0,a.jsx)("button",{onClick:h,className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remove filter",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded-full",children:(0,a.jsx)("div",{className:"h-2 bg-green-600 rounded-full transition-all duration-150",style:{width:"".concat(k,"%")}})}),(0,a.jsx)("div",{ref:y,className:"absolute top-1/2 transform -translate-y-1/2 w-4 h-4 bg-green-600 rounded-full cursor-grab border-2 border-white shadow-md transition-all duration-150 ".concat(g?"cursor-grabbing scale-110":"hover:scale-105"),style:{left:"calc(".concat(k,"% - 8px)")},onMouseDown:e=>{p(!0),f({x:e.clientX,value:v}),e.preventDefault()}})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Current: ",(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:[x(v),m]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"number",value:v,onChange:e=>{let t=parseFloat(e.target.value)||0;N(t),l(t)},min:n,max:i,step:c,className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:m})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[x(n),m]}),(0,a.jsxs)("span",{children:[x(i),m]})]})]})]})},m=s(28562),h=s(23346),u=s(90437),g=s(39810),p=e=>{var t,s;let{isOpen:l,onClose:n,ticker:i}=e,[c,o]=(0,r.useState)([]),[x,p]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[N,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l&&i&&w()},[l,i]),(0,r.useEffect)(()=>{let e=()=>{b(window.innerWidth<640)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let w=async()=>{f(!0),v(null);try{let[e,t]=await Promise.all([fetch("/api/dark-pool-history?ticker=".concat(i)),fetch("/api/stock-price-change?ticker=".concat(i))]);if(!e.ok||!t.ok)throw Error("Failed to fetch data");let[s,a]=await Promise.all([e.json(),t.json()]);o(s.data||[]),p(a)}catch(e){v("Failed to load data: "+e.message)}finally{f(!1)}},k=e=>new Intl.NumberFormat().format(e),S=e=>new Intl.NumberFormat().format(1e3*Math.round(e/1e3)),_=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),C=e=>e?"$".concat(e.toFixed(2)):"N/A";return l?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-0 sm:p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl max-w-6xl w-full h-full sm:h-auto sm:max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,a.jsx)(m.Z,{className:"".concat(N?"h-5 w-5":"h-6 w-6"," text-green-600")}),(0,a.jsx)("h2",{className:"".concat(N?"text-lg":"text-2xl"," font-bold text-gray-900"),children:N?"".concat(i," Analysis"):"Dark Pool Analysis - ".concat(i)})]}),(0,a.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors touch-manipulation",children:(0,a.jsx)(d.Z,{className:"".concat(N?"h-5 w-5":"h-6 w-6"," text-gray-500")})})]}),(0,a.jsxs)("div",{className:"".concat(N?"p-3":"p-6"," overflow-y-auto ").concat(N?"max-h-[calc(100vh-120px)]":"max-h-[calc(90vh-120px)]"),children:[j&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading data..."})]}),y&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-red-700",children:y}),(0,a.jsx)("button",{onClick:w,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}),!j&&!y&&(0,a.jsxs)("div",{className:"space-y-6",children:[x&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Today's Price Change"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Current Price"}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:C(x.currentPrice)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Previous Close"}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:C(x.previousClose)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Change"}),(0,a.jsxs)("p",{className:"text-xl font-bold flex items-center justify-center ".concat(x.change>=0?"text-green-600":"text-red-600"),children:[x.change>=0?(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-1"}):(0,a.jsx)(g.Z,{className:"h-5 w-5 mr-1"}),null==(t=x.change)?"N/A":t>=0?"+$".concat(t.toFixed(2)):"$".concat(t.toFixed(2))]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Change %"}),(0,a.jsx)("p",{className:"text-xl font-bold ".concat(x.changePercent>=0?"text-green-600":"text-red-600"),children:null==(s=x.changePercent)?"N/A":s>=0?"+".concat(s.toFixed(2),"%"):"".concat(s.toFixed(2),"%")})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Historical Dark Pool Volume (",c.length," days)"]}),c.length>0&&c.length<5&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Limited History:"})," Only ",c.length," day",1!==c.length?"s":""," of data available. More historical data will appear as additional trading days are processed."]})}),c.length>=5&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:[(0,a.jsx)("strong",{children:"Complete History:"})," Showing all ",c.length," days of dark pool data available for ",i,"."]})}),c.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"".concat(N?"h-72":"h-80"," bg-gray-50 rounded-lg ").concat(N?"p-1":"p-4"," overflow-x-auto touch-pan-x"),children:[(0,a.jsxs)("div",{className:"relative w-full h-full",style:{minWidth:N?"100%":"auto"},children:[(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 ".concat(N?"100":"800"," ").concat(N?"100":"300"),preserveAspectRatio:"xMidYMid meet",style:{touchAction:"pan-y pinch-zoom"},children:[(0,a.jsx)("defs",{children:(0,a.jsx)("pattern",{id:"grid",width:"40",height:"60",patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 40 0 L 0 0 0 60",fill:"none",stroke:"#e5e7eb",strokeWidth:"0.5",opacity:"0.3"})})}),(0,a.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(()=>{let e=Math.max(...c.map(e=>e.total_volume)),t=Math.min(...c.map(e=>e.total_volume)),s=e-t,r=N?2:4,l=N?12:60,n=N?98:780,i=N?90:280,o=N?30:60;return Array.from({length:r+1},(e,c)=>{let d=t+s*c/r,x=i-c*o;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:l,y1:x,x2:n,y2:x,stroke:"#e5e7eb",strokeWidth:N?"0.3":"0.5",opacity:"0.5"}),(0,a.jsx)("text",{x:l-2,y:x+(N?1.5:4),textAnchor:"end",className:"fill-gray-500",style:{fontSize:N?"4px":"12px"},children:N?"".concat((d/1e3).toFixed(0),"K"):k(Math.round(d))})]},c)})})(),(()=>{let e=Math.max(...c.map(e=>e.total_volume)),t=Math.min(...c.map(e=>e.total_volume)),s=e-t||1,r=N?12:80,l=(N?98:780)-r,n=N?90:280,i=N?60:240,o=c.map((e,a)=>{let o=r+l/Math.max(c.length-1,1)*a,d=n-(e.total_volume-t)/s*i;return"".concat(o,",").concat(d)}).join(" ");return(0,a.jsx)("polyline",{points:o,fill:"none",stroke:"#10b981",strokeWidth:N?"1.5":"3",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"})})(),c.map((e,t)=>{let s=Math.max(...c.map(e=>e.total_volume)),r=Math.min(...c.map(e=>e.total_volume)),l=N?12:80,n=N?98:780,i=N?90:280,o=N?60:240,d=l+(n-l)/Math.max(c.length-1,1)*t,x=i-(e.total_volume-r)/(s-r||1)*o;return(0,a.jsxs)("g",{children:[N&&(0,a.jsx)("circle",{cx:d,cy:x,r:"4",fill:"transparent",style:{cursor:"pointer",touchAction:"manipulation"},children:(0,a.jsx)("title",{children:"".concat(_(e.date),": ").concat(k(e.total_volume)," volume")})}),(0,a.jsx)("circle",{cx:d,cy:x,r:N?"2":"4",fill:"#10b981",stroke:"white",strokeWidth:N?"1":"2",className:"transition-all duration-200 cursor-pointer",style:{cursor:"pointer",touchAction:"manipulation",pointerEvents:N?"none":"auto"},children:!N&&(0,a.jsx)("title",{children:"".concat(_(e.date),": ").concat(k(e.total_volume)," volume")})})]},"".concat(e.date,"-").concat(t))})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex ".concat(N?"justify-around":"justify-between"," ").concat(N?"px-2":"px-16 sm:px-20"," pb-1"),children:c.map((e,t)=>{let s=N?3:8;return c.length<=4||t%Math.ceil(c.length/s)==0||t===c.length-1?(0,a.jsx)("div",{className:"".concat(N?"text-[10px]":"text-xs"," text-gray-500 text-center"),style:{transform:N?"none":"translateX(-50%)",marginLeft:N?"0":0===t?"60px":t===c.length-1?"-60px":"0",minWidth:"auto",maxWidth:N?"60px":"auto"},children:new Date(e.date).toLocaleDateString("en-US",{month:N?"numeric":"short",day:"numeric"})},"label-".concat(e.date,"-").concat(t)):null})})]}),(0,a.jsxs)("div",{className:"".concat(N?"mt-2":"mt-4"," flex ").concat(N?"flex-row items-center justify-center space-x-4":"flex-row items-center justify-center space-x-6"," ").concat(N?"text-xs":"text-sm"," text-gray-600"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"".concat(N?"w-3 h-0.5":"w-4 h-0.5"," bg-green-600")}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:N?"Volume":"Dark Pool Volume"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"".concat(N?"w-2 h-2":"w-3 h-3"," bg-green-600 rounded-full")}),(0,a.jsx)("span",{className:"whitespace-nowrap",children:N?"Points":"Data Points"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"".concat(N?"px-3 py-2":"px-6 py-3"," text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),children:"Date"}),(0,a.jsx)("th",{className:"".concat(N?"px-3 py-2":"px-6 py-3"," text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),children:"Volume"}),(0,a.jsx)("th",{className:"".concat(N?"px-3 py-2":"px-6 py-3"," text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),children:"Trades"}),(0,a.jsx)("th",{className:"".concat(N?"px-3 py-2":"px-6 py-3"," text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),children:"Avg Price"}),(0,a.jsx)("th",{className:"".concat(N?"px-3 py-2":"px-6 py-3"," text-left text-xs font-medium text-gray-500 uppercase tracking-wider"),children:"Total Value"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.reverse().map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"".concat(N?"px-3 py-2":"px-6 py-4"," whitespace-nowrap text-sm font-medium text-gray-900"),children:_(e.date)}),(0,a.jsx)("td",{className:"".concat(N?"px-3 py-2":"px-6 py-4"," whitespace-nowrap text-sm text-gray-900"),children:k(e.total_volume)}),(0,a.jsx)("td",{className:"".concat(N?"px-3 py-2":"px-6 py-4"," whitespace-nowrap text-sm text-gray-900"),children:k(e.trade_count)}),(0,a.jsx)("td",{className:"".concat(N?"px-3 py-2":"px-6 py-4"," whitespace-nowrap text-sm text-gray-900"),children:C(e.avg_price)}),(0,a.jsxs)("td",{className:"".concat(N?"px-3 py-2":"px-6 py-4"," whitespace-nowrap text-sm text-gray-900"),children:["$",S(e.total_value)]})]},e.date))})]})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsxs)("p",{className:"text-gray-500",children:["No historical dark pool data available for ",i]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:c.length>0&&(0,a.jsxs)("span",{children:["Showing ",c.length," days of dark pool data for ",i]})}),(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})]})]})}):null},j=s(74598),f=s(47935),y=s(77918),v=s(46611);let N=()=>{try{let{RefreshCw:e}=s(13181);return(0,a.jsx)(e,{className:"h-4 w-4"})}catch(e){return(0,a.jsx)("span",{children:"\uD83D\uDD04"})}},b=()=>{try{let{BarChart3:e}=s(13181);return(0,a.jsx)(e,{className:"h-4 w-4"})}catch(e){return(0,a.jsx)("span",{children:"\uD83D\uDCCA"})}},w=()=>{try{let{TrendingUp:e}=s(13181);return(0,a.jsx)(e,{className:"h-4 w-4"})}catch(e){return(0,a.jsx)("span",{children:"\uD83D\uDCC8"})}};function k(){var e;let[t,s]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null),[h,g]=(0,r.useState)("volume_ratio"),[k,S]=(0,r.useState)(!1),[_,C]=(0,r.useState)({minVolume:25e7,minPrice:50}),[P,D]=(0,r.useState)(!1),[A,V]=(0,r.useState)(!1),[M,F]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=T();e?(s(e),o(!1)):Z()},[h,_]);let E=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new Date;a.setTime(a.getTime()+864e5*s),document.cookie="".concat(e,"=").concat(JSON.stringify(t),";expires=").concat(a.toUTCString(),";path=/")},L=e=>{let t=e+"=",s=document.cookie.split(";");for(let e=0;e<s.length;e++){let a=s[e];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null},T=()=>{try{let e=L("darkpool_data");if(e){let t=JSON.parse(e),s=new Date().toISOString().split("T")[0];if(t.date===s||t.date===R())return t}}catch(e){console.error("Error reading cached data:",e)}return null},R=()=>{let e=new Date,t=new Date(e);for(t.setDate(e.getDate()-1);0===t.getDay()||6===t.getDay();)t.setDate(t.getDate()-1);return t.toISOString().split("T")[0]},Z=async()=>{o(!0),m(null);try{let e=new URLSearchParams;_.minVolume>0&&e.append("minVolume",_.minVolume.toString()),_.minPrice>0&&e.append("minPrice",_.minPrice.toString());let t=await fetch("/api/darkpool-trades?".concat(e.toString())),a=await t.json();if(t.ok){let e={...a,tickers:[...a.tickers].sort((e,t)=>{switch(h){case"total_value":return t.total_value-e.total_value;case"avg_price":return t.avg_price-e.avg_price;default:if("N/A"===e.volume_ratio&&"N/A"===t.volume_ratio)return t.total_volume-e.total_volume;if("N/A"===e.volume_ratio)return 1;if("N/A"===t.volume_ratio)return -1;return parseFloat(t.volume_ratio)-parseFloat(e.volume_ratio)}})};s(e),E("darkpool_data",e,1)}else m(a.error||"Failed to load dark pool data")}catch(e){console.error("Error fetching dark pool data:",e),m("Network error fetching data")}finally{o(!1)}},I=async()=>{document.cookie="darkpool_data=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;",await Z()},W=e=>{F(e),V(!0)},$=e=>new Intl.NumberFormat().format(e),O=e=>new Intl.NumberFormat().format(1e3*Math.round(e/1e3)),U=e=>{let{ticker:t}=e;return(0,a.jsx)("div",{className:"border border-gray-200 hover:shadow-lg transition-shadow duration-200 bg-white rounded-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:t.ticker}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.trade_count," trades"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Volume Ratio:"}),(0,a.jsx)("span",{className:"font-bold text-lg ".concat("N/A"!==t.volume_ratio&&parseFloat(t.volume_ratio)>1?"text-green-600":"text-gray-900"),children:"N/A"!==t.volume_ratio?"".concat(t.volume_ratio,"x"):"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Today's Volume:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:$(t.total_volume)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"7-Day Avg:"}),(0,a.jsx)("span",{className:"font-medium text-gray-700",children:$(t.avg_7day_volume)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Avg Price:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["$",t.avg_price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Value:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["$",O(t.total_value)]})]}),t.performance&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Today's Change:"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(t.performance.change>=0?"text-green-600":"text-red-600"),children:[t.performance.change>=0?"+":"","$",t.performance.change.toFixed(2)," (",t.performance.changePercent>=0?"+":"",t.performance.changePercent.toFixed(2),"%)"]})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100 space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>W(t.ticker),className:"w-full bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg font-medium transition-colors flex items-center justify-center text-sm",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Dark Pool History"]}),(0,a.jsx)(n(),{href:"/straddle-calculator?ticker=".concat(t.ticker),children:(0,a.jsx)("button",{className:"w-full border border-green-600 text-green-600 bg-transparent hover:bg-green-50 px-3 py-2 rounded-lg font-medium transition-colors text-xs",children:"ATM Straddle"})})]})]})})};return d?(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)(c.Z,{}),(0,a.jsx)("div",{className:"bg-gray-50 py-12 px-4",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto text-center",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Error Loading Data"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:d}),(0,a.jsx)("button",{onClick:I,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 touch-manipulation",children:"Try Again"})]})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)(c.Z,{}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h2",{className:"text-3xl font-black text-gray-900 leading-tight tracking-tight",children:"Dark Pool Scanner"}),(0,a.jsx)("button",{onClick:()=>S(!k),className:"p-2 text-gray-500 hover:text-green-600 transition-colors",title:"How it works",children:(0,a.jsx)(j.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>D(!P),className:"p-2 transition-colors ".concat(P||_.minVolume>0||_.minPrice>0?"text-green-600 bg-green-50":"text-gray-500 hover:text-green-600"),title:"Toggle filters",children:(0,a.jsx)(f.Z,{className:"h-6 w-6"})}),(_.minVolume>0||_.minPrice>0)&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-600 rounded-full border-2 border-white"})]}),(0,a.jsx)("button",{onClick:I,className:"p-2 text-gray-500 hover:text-green-600 transition-colors",title:"Refresh data",disabled:l,children:(0,a.jsx)(N,{className:"h-6 w-6 ".concat(l?"animate-spin":"")})})]}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Institutional-grade dark pool analytics"}),(0,a.jsx)("div",{className:"mt-6 mb-6 p-6 bg-gradient-to-r from-green-50 to-green-100 border border-green-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text-center sm:text-left",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-green-800 mb-2",children:"Get Real-Time SMS Alerts"}),(0,a.jsx)("p",{className:"text-green-700",children:"Never miss dark pool activity again. Subscribe to VolAlert Pro for instant notifications."})]}),(0,a.jsx)("a",{href:"https://buy.stripe.com/4gM8wR0ol1AU1q3eS50oM01",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center",children:[(0,a.jsx)(y.Z,{className:"mr-2 h-5 w-5"}),"Subscribe to VolAlert Pro",(0,a.jsx)(v.Z,{className:"ml-2 h-5 w-5"})]})})]})}),P&&(0,a.jsxs)("div",{className:"mt-6 mb-6 p-6 bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filter Controls"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>C({minVolume:0,minPrice:0}),className:"px-3 py-1 text-sm text-gray-600 hover:text-red-600 transition-colors",children:"Clear All"}),(0,a.jsx)("button",{onClick:()=>C({minVolume:5e8,minPrice:50}),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Set Defaults"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(x,{label:"Minimum Volume",value:_.minVolume,onChange:e=>C(t=>({...t,minVolume:e})),min:0,max:2e9,step:1e6,formatValue:e=>"$".concat((e/1e6).toFixed(0),"M"),unit:""}),(0,a.jsx)(x,{label:"Minimum Price",value:_.minPrice,onChange:e=>C(t=>({...t,minPrice:e})),min:0,max:500,step:1,formatValue:e=>"$".concat(e.toFixed(0)),unit:""})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("span",{className:"text-gray-600",children:["Active Filters:",_.minVolume>0&&(0,a.jsxs)("span",{className:"ml-1 font-medium text-green-600",children:["Volume ≥ $",(_.minVolume/1e6).toFixed(0),"M"]}),_.minVolume>0&&_.minPrice>0&&(0,a.jsx)("span",{className:"mx-2 text-gray-400",children:"•"}),_.minPrice>0&&(0,a.jsxs)("span",{className:"ml-1 font-medium text-green-600",children:["Price ≥ $",_.minPrice]}),0===_.minVolume&&0===_.minPrice&&(0,a.jsx)("span",{className:"ml-1 text-gray-500",children:"None"})]})}),(null==t?void 0:t.filters)&&(0,a.jsxs)("div",{className:"text-gray-600",children:["Showing ",t.filters.filteredCount," of ",t.filters.totalCount," tickers"]})]})})]}),k&&(0,a.jsxs)("div",{className:"mt-4 max-w-2xl bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"How the Dark Pool Scanner Works:"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"What are Dark Pools?"})," Private exchanges where large institutions trade stocks away from public markets, often to avoid price impact."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Volume Ratio:"})," Compares today's dark pool volume to the 7-day average. Higher ratios indicate unusual institutional activity."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Filters:"})," Use the draggable filter controls to customize volume and price thresholds. Default filters are $500M+ volume and $50+ price for high-quality stocks."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Why It Matters:"})," Large dark pool activity can signal institutional buying/selling before it becomes public, potentially indicating future price movements."]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Data Source:"})," Analyzes daily dark pool trading data identified from Securities Information Processors (SIPs)."]})]})]})]})}),l&&(0,a.jsx)("div",{className:"bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,a.jsx)(N,{className:"h-8 w-8 text-green-600 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading dark pool data..."})]})}),!l&&t&&(0,a.jsx)("div",{className:"bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:[t.filename?t.filename.replace(".json",""):new Date(t.date+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"})," - Dark Pool Activity"]}),(0,a.jsxs)("p",{className:"text-base text-gray-600 max-w-2xl mx-auto",children:[$(t.tickers.length)," tickers, ",$(t.total_volume)," total volume"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[(0,a.jsx)("option",{value:"volume_ratio",children:"Volume Ratio"}),(0,a.jsx)("option",{value:"total_value",children:"Total Value"}),(0,a.jsx)("option",{value:"avg_price",children:"Price"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,a.jsx)(w,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Highest First"})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(null==t?void 0:null===(e=t.filters)||void 0===e?void 0:e.appliedFilters)?"Showing ".concat(t.filters.filteredCount," of ").concat(t.filters.totalCount," tickers with active filters"):"Showing all dark pool activity for the selected date"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:t.tickers.map((e,t)=>(0,a.jsx)(U,{ticker:e},e.ticker||t))}),0===t.tickers.length&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No dark pool activity found for this date."})})]})}),!l&&!t&&(0,a.jsx)("div",{className:"bg-gray-50 py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,a.jsx)(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please process CSV files first using the command line processor."})]})}),(0,a.jsx)(i.Z,{})]}),(0,a.jsx)(p,{isOpen:A,onClose:()=>V(!1),ticker:M})]})}class S extends r.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"We encountered an unexpected error. Please try again or reload the page."}),!1,(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Try Again"}),(0,a.jsx)("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Reload Page"})]}),this.state.retryCount>0&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Retry attempt: ",this.state.retryCount]})]})})}):this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState(e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1}))},this.handleReload=()=>{window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}}function _(){return(0,a.jsx)(S,{children:(0,a.jsx)(k,{})})}}},function(e){e.O(0,[75,648,688,433,204,888,774,179],function(){return e(e.s=57041)}),_N_E=e.O()}]);