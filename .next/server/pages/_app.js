(()=>{var e={};e.id=888,e.ids=[888],e.modules={9775:(e,r,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.d(r,{Qz:()=>h,c0:()=>p,il:()=>f,is:()=>m,ni:()=>d,qj:()=>l,y1:()=>c,zB:()=>o});var a=s(3745),i=s(401),n=s(1492),u=e([a,i,n]);[a,i,n]=u.then?(await u)():u;let y={apiKey:process.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.NEXT_PUBLIC_FIREBASE_APP_ID},w=y.apiKey&&y.projectId,I=null,E=null,b=null,A=null;async function c(e,r,s){if(!w)return{success:!1,error:"Firebase is not configured"};try{let t=(await (0,i.createUserWithEmailAndPassword)(E,e,r)).user;return s&&await (0,i.updateProfile)(t,{displayName:s}),await (0,n.setDoc)((0,n.doc)(b,"users",t.uid),{uid:t.uid,email:t.email,displayName:s||null,createdAt:(0,n.serverTimestamp)(),subscription:{status:"free",stripeCustomerId:null,stripeSubscriptionId:null},preferences:{minVolumeRatio:1.5,watchlist:[],maxAlertsPerDay:5},phoneNumber:null}),{success:!0,user:t}}catch(e){return console.error("Sign up error:",e),{success:!1,error:g(e.code)}}}async function o(e,r){if(!w)return{success:!1,error:"Firebase is not configured"};try{let s=await (0,i.signInWithEmailAndPassword)(E,e,r);return{success:!0,user:s.user}}catch(e){return console.error("Sign in error:",e),{success:!1,error:g(e.code)}}}async function l(){if(!w)return{success:!1,error:"Firebase is not configured"};try{let e=(await (0,i.signInWithPopup)(E,A)).user;return(await (0,n.getDoc)((0,n.doc)(b,"users",e.uid))).exists()||await (0,n.setDoc)((0,n.doc)(b,"users",e.uid),{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:(0,n.serverTimestamp)(),subscription:{status:"free",stripeCustomerId:null,stripeSubscriptionId:null},preferences:{minVolumeRatio:1.5,watchlist:[],maxAlertsPerDay:5},phoneNumber:null}),{success:!0,user:e}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:g(e.code)}}}async function d(){if(!w)return{success:!1,error:"Firebase is not configured"};try{return await (0,i.signOut)(E),{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}}async function p(e){if(!w)return{success:!1,error:"Firebase is not configured"};try{return await (0,i.sendPasswordResetEmail)(E,e),{success:!0}}catch(e){return console.error("Password reset error:",e),{success:!1,error:g(e.code)}}}async function m(e){if(!w)return{success:!1,error:"Firebase is not configured"};try{let r=await (0,n.getDoc)((0,n.doc)(b,"users",e));if(r.exists())return{success:!0,data:r.data()};return{success:!1,error:"User not found"}}catch(e){return console.error("Get user data error:",e),{success:!1,error:e.message}}}async function h(e,r){if(!w)return{success:!1,error:"Firebase is not configured"};try{return await (0,n.updateDoc)((0,n.doc)(b,"users",e),{phoneNumber:r,updatedAt:(0,n.serverTimestamp)()}),{success:!0}}catch(e){return console.error("Update phone error:",e),{success:!1,error:e.message}}}async function f(e,r){if(!w)return{success:!1,error:"Firebase is not configured"};try{return await (0,n.updateDoc)((0,n.doc)(b,"users",e),{preferences:r,updatedAt:(0,n.serverTimestamp)()}),{success:!0}}catch(e){return console.error("Update preferences error:",e),{success:!1,error:e.message}}}function g(e){switch(e){case"auth/email-already-in-use":return"This email is already registered. Try signing in instead.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/operation-not-allowed":return"Email/password sign in is not enabled.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/popup-closed-by-user":return"Sign in was cancelled.";default:return"An error occurred. Please try again."}}w&&(I=0===(0,a.getApps)().length?(0,a.initializeApp)(y):(0,a.getApps)()[0],E=(0,i.getAuth)(I),b=(0,n.getFirestore)(I),A=new i.GoogleAuthProvider),t()}catch(e){t(e)}})},3414:(e,r,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{default:()=>u});var a=s(997);s(2636);var i=s(1572),n=e([i]);function u({Component:e,pageProps:r}){return a.jsx(i.H,{children:a.jsx(e,{...r})})}i=(n.then?(await n)():n)[0],t()}catch(e){t(e)}})},1572:(e,r,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.d(r,{H:()=>o,a:()=>c});var a=s(997),i=s(6689),n=s(9775),u=e([n]);n=(u.then?(await u)():u)[0];let l=(0,i.createContext)({});function c(){return(0,i.useContext)(l)}function o({children:e}){let[r,s]=(0,i.useState)(null),[t,u]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0),[d,p]=(0,i.useState)(null),m=async()=>{if(r){let e=await (0,n.is)(r.uid);e.success&&u(e.data)}},h=async()=>{let e=await (0,n.ni)();return e.success&&(s(null),u(null)),e};return a.jsx(l.Provider,{value:{user:r,userData:t,loading:c,error:d,refreshUserData:m,signOut:h,hasActiveSubscription:()=>t?.subscription?.status==="active",getStripeCustomerId:()=>t?.subscription?.stripeCustomerId,isAuthenticated:!!r},children:e})}t()}catch(e){t(e)}})},2636:()=>{},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},3745:e=>{"use strict";e.exports=import("firebase/app")},401:e=>{"use strict";e.exports=import("firebase/auth")},1492:e=>{"use strict";e.exports=import("firebase/firestore")}};var r=require("../webpack-runtime.js");r.C(e);var s=r(r.s=3414);module.exports=s})();