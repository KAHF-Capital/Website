"use strict";(()=>{var e={};e.id=120,e.ids=[120],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5835:(e,t,a)=>{a.r(t),a.d(t,{config:()=>p,default:()=>d,routeModule:()=>u});var r={};a.r(r),a.d(r,{default:()=>s});var o=a(1802),i=a(7153),l=a(6249),n=a(5849);async function s(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let{ticker:a,strikePrice:r,totalPremium:o,daysToExpiration:i}=e.body;if(!a||!o)return t.status(400).json({error:"Missing required parameters: ticker and totalPremium are required"});let l=r||100;try{let e=new Date().toISOString().split("T")[0],r=Math.max(500,(i||30)+250),s=new Date(Date.now()-864e5*r).toISOString().split("T")[0],d=await (0,n.rK)(a,s,e),p=(0,n.gd)(d,i||30),u=function(e,t,a){let r=0,o=0,i=0;if(!e||0===e.length)return{aboveUpper:0,belowLower:0,totalProfitable:0,totalSamples:0,profitableRate:0,maxProfitProbability:0,maxLossProbability:0,aboveUpperPct:0,belowLowerPct:0,upperBreakevenPct:100*t,lowerBreakevenPct:100*a,avgMove:0,maxMove:0,minMove:0,dataQuality:"none"};let l=e.filter(e=>.5>=Math.abs(e.percentMove));0===l.length&&(l=e),l.forEach(e=>{let l=e.percentMove;l>t&&r++,l<a&&o++,i++});let n=r+o,s=i>0?n/i*100:0,d=i>0?(i-n)/i*100:0,p=l.length>0?l.reduce((e,t)=>e+Math.abs(t.percentMove),0)/l.length:0,u=l.length>0?Math.max(...l.map(e=>Math.abs(e.percentMove))):0,m=l.length>0?Math.min(...l.map(e=>Math.abs(e.percentMove))):0;return{aboveUpper:r,belowLower:o,totalProfitable:n,totalSamples:i,profitableRate:s,maxProfitProbability:s,maxLossProbability:d,aboveUpperPct:i>0?r/i*100:0,belowLowerPct:i>0?o/i*100:0,upperBreakevenPct:100*t,lowerBreakevenPct:100*a,avgMove:100*p,maxMove:100*u,minMove:100*m,dataQuality:i>=50?"high":i>=20?"medium":i>=5?"low":"limited"}}(p,(l+o-l)/l,(l-o-l)/l);t.status(200).json(u)}catch(e){console.error("Error in straddle analysis:",e),t.status(500).json({error:"Failed to perform analysis"})}}let d=(0,l.l)(r,"default"),p=(0,l.l)(r,"config"),u=new o.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/straddle-analysis",pathname:"/api/straddle-analysis",bundlePath:"",filename:""},userland:r})}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[485],()=>a(5835));module.exports=r})();