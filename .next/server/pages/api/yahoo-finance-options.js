"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/yahoo-finance-options";
exports.ids = ["pages/api/yahoo-finance-options"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fyahoo-finance-options&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cyahoo-finance-options.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fyahoo-finance-options&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cyahoo-finance-options.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_yahoo_finance_options_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\yahoo-finance-options.js */ \"(api)/./pages/api/yahoo-finance-options.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_yahoo_finance_options_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_yahoo_finance_options_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/yahoo-finance-options\",\n        pathname: \"/api/yahoo-finance-options\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_yahoo_finance_options_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnlhaG9vLWZpbmFuY2Utb3B0aW9ucyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDeWFob28tZmluYW5jZS1vcHRpb25zLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ21FO0FBQ25FO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2FoZi1jYXBpdGFsLXdlYnNpdGUvPzg2ZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFx5YWhvby1maW5hbmNlLW9wdGlvbnMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS95YWhvby1maW5hbmNlLW9wdGlvbnNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS95YWhvby1maW5hbmNlLW9wdGlvbnNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fyahoo-finance-options&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cyahoo-finance-options.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/yahoo-finance-options.js":
/*!********************************************!*\
  !*** ./pages/api/yahoo-finance-options.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fetch__WEBPACK_IMPORTED_MODULE_0__);\n\n// Yahoo Finance Options Data Fetcher\n// This replaces Polygon.io API calls to avoid rate limiting\n// Yahoo Finance API endpoints (unofficial but stable)\nconst YAHOO_FINANCE_BASE = \"https://query1.finance.yahoo.com/v8/finance/chart\";\nconst YAHOO_OPTIONS_BASE = \"https://query2.finance.yahoo.com/v7/finance/options\";\n// Cache for options data to reduce API calls\nconst optionsCache = new Map();\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n// Get current stock price from Yahoo Finance\nasync function getCurrentPrice(ticker) {\n    try {\n        const url = `${YAHOO_FINANCE_BASE}/${ticker}`;\n        const response = await node_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url);\n        if (!response.ok) {\n            throw new Error(`Yahoo Finance API error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\n            throw new Error(\"No price data available\");\n        }\n        const result = data.chart.result[0];\n        const currentPrice = result.meta.regularMarketPrice;\n        return {\n            price: currentPrice,\n            currency: result.meta.currency,\n            exchange: result.meta.exchangeName,\n            timestamp: result.meta.regularMarketTime\n        };\n    } catch (error) {\n        console.error(`Error fetching current price for ${ticker}:`, error.message);\n        throw error;\n    }\n}\n// Get available expiration dates for a ticker\nasync function getExpirationDates(ticker) {\n    try {\n        const url = `${YAHOO_OPTIONS_BASE}/${ticker}`;\n        const response = await node_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url);\n        if (!response.ok) {\n            throw new Error(`Yahoo Finance options API error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data.optionChain || !data.optionChain.result || data.optionChain.result.length === 0) {\n            throw new Error(\"No options data available\");\n        }\n        const result = data.optionChain.result[0];\n        const expirations = result.expirationDates || [];\n        // Convert timestamps to date strings\n        const expirationDates = expirations.map((timestamp)=>{\n            const date = new Date(timestamp * 1000);\n            return date.toISOString().split(\"T\")[0]; // YYYY-MM-DD format\n        });\n        return expirationDates.sort();\n    } catch (error) {\n        console.error(`Error fetching expiration dates for ${ticker}:`, error.message);\n        throw error;\n    }\n}\n// Get options data for a specific ticker and expiration\nasync function getOptionsData(ticker, expirationDate) {\n    const cacheKey = `${ticker}-${expirationDate}`;\n    const now = Date.now();\n    // Check cache first\n    if (optionsCache.has(cacheKey)) {\n        const cached = optionsCache.get(cacheKey);\n        if (now - cached.timestamp < CACHE_DURATION) {\n            return cached.data;\n        }\n    }\n    try {\n        // Convert date to timestamp\n        const expirationTimestamp = Math.floor(new Date(expirationDate).getTime() / 1000);\n        const url = `${YAHOO_OPTIONS_BASE}/${ticker}?date=${expirationTimestamp}`;\n        const response = await node_fetch__WEBPACK_IMPORTED_MODULE_0___default()(url);\n        if (!response.ok) {\n            throw new Error(`Yahoo Finance options API error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data.optionChain || !data.optionChain.result || data.optionChain.result.length === 0) {\n            throw new Error(\"No options data available for this expiration\");\n        }\n        const result = data.optionChain.result[0];\n        const currentPrice = result.quote.regularMarketPrice;\n        // Find ATM strike price (closest to current price)\n        const calls = result.options[0]?.calls || [];\n        const puts = result.options[0]?.puts || [];\n        if (calls.length === 0 || puts.length === 0) {\n            throw new Error(\"No options contracts available\");\n        }\n        // Find the strike closest to current price\n        let atmStrike = null;\n        let minDistance = Infinity;\n        calls.forEach((call)=>{\n            const distance = Math.abs(call.strike - currentPrice);\n            if (distance < minDistance) {\n                minDistance = distance;\n                atmStrike = call.strike;\n            }\n        });\n        if (!atmStrike) {\n            throw new Error(\"Could not find ATM strike price\");\n        }\n        // Find call and put options at ATM strike\n        const atmCall = calls.find((call)=>call.strike === atmStrike);\n        const atmPut = puts.find((put)=>put.strike === atmStrike);\n        if (!atmCall || !atmPut) {\n            throw new Error(\"Could not find ATM call and put options\");\n        }\n        // Calculate straddle premium (use mid price)\n        const callMid = (atmCall.bid + atmCall.ask) / 2;\n        const putMid = (atmPut.bid + atmPut.ask) / 2;\n        const totalPremium = callMid + putMid;\n        const optionsData = {\n            ticker,\n            expirationDate,\n            currentPrice,\n            strikePrice: atmStrike,\n            callOption: {\n                strike: atmCall.strike,\n                bid: atmCall.bid,\n                ask: atmCall.ask,\n                mid: callMid,\n                volume: atmCall.volume,\n                openInterest: atmCall.openInterest\n            },\n            putOption: {\n                strike: atmPut.strike,\n                bid: atmPut.bid,\n                ask: atmPut.ask,\n                mid: putMid,\n                volume: atmPut.volume,\n                openInterest: atmPut.openInterest\n            },\n            totalPremium,\n            dataQuality: \"high\" // Yahoo Finance data is generally reliable\n        };\n        // Cache the result\n        optionsCache.set(cacheKey, {\n            data: optionsData,\n            timestamp: now\n        });\n        return optionsData;\n    } catch (error) {\n        console.error(`Error fetching options data for ${ticker} ${expirationDate}:`, error.message);\n        throw error;\n    }\n}\n// Estimate straddle premium when exact options data is not available\nfunction estimateStraddlePremium(currentPrice, daysToExpiration, volatility = 0.3) {\n    // Simple Black-Scholes approximation for straddle premium\n    const timeToExpiration = daysToExpiration / 365;\n    const sqrtTime = Math.sqrt(timeToExpiration);\n    // Approximate ATM straddle premium using volatility\n    // This is a simplified calculation - in reality, you'd use the full Black-Scholes formula\n    const estimatedPremium = currentPrice * volatility * sqrtTime * 0.4; // 0.4 is an empirical factor\n    return Math.max(estimatedPremium, currentPrice * 0.01); // Minimum 1% of stock price\n}\n// Get straddle data with fallback to estimation\nasync function getStraddleData(ticker, expirationDate = null, daysToExpiration = 30) {\n    try {\n        // Get current price first\n        const priceData = await getCurrentPrice(ticker);\n        const currentPrice = priceData.price;\n        // Get available expiration dates\n        let availableExpirations = [];\n        try {\n            availableExpirations = await getExpirationDates(ticker);\n        } catch (error) {\n            console.warn(`Could not get expiration dates for ${ticker}:`, error.message);\n        }\n        // If no expiration date provided, return available expirations without forcing a selection\n        if (!expirationDate) {\n            return {\n                ticker,\n                currentPrice,\n                availableExpirations,\n                message: \"Please select an expiration date from the available options\",\n                source: \"expiration_list\",\n                dataQuality: \"none\"\n            };\n        }\n        // Check if the requested expiration date is available\n        if (availableExpirations.length > 0 && !availableExpirations.includes(expirationDate)) {\n            return {\n                ticker,\n                currentPrice,\n                requestedExpiration: expirationDate,\n                availableExpirations,\n                message: `Requested expiration date ${expirationDate} is not available`,\n                source: \"expiration_not_available\",\n                dataQuality: \"none\"\n            };\n        }\n        // Try to get real options data for the specified expiration\n        try {\n            const optionsData = await getOptionsData(ticker, expirationDate);\n            return {\n                ...optionsData,\n                availableExpirations,\n                source: \"yahoo_finance\",\n                executionDate: new Date().toISOString().split(\"T\")[0]\n            };\n        } catch (error) {\n            console.warn(`Could not get options data for ${ticker} ${expirationDate}, using estimation:`, error.message);\n            // Fallback to estimation\n            const estimatedPremium = estimateStraddlePremium(currentPrice, daysToExpiration);\n            return {\n                ticker,\n                expirationDate,\n                currentPrice,\n                strikePrice: currentPrice,\n                totalPremium: estimatedPremium,\n                availableExpirations,\n                source: \"estimation\",\n                executionDate: new Date().toISOString().split(\"T\")[0],\n                dataQuality: \"medium\",\n                note: \"Premium estimated using Black-Scholes approximation\"\n            };\n        }\n    } catch (error) {\n        console.error(`Error getting straddle data for ${ticker}:`, error.message);\n        throw error;\n    }\n}\n// Batch process multiple tickers with rate limiting\nasync function getBatchStraddleData(tickers, maxConcurrent = 3, delayMs = 1000) {\n    const results = [];\n    for(let i = 0; i < tickers.length; i += maxConcurrent){\n        const batch = tickers.slice(i, i + maxConcurrent);\n        const batchPromises = batch.map(async (ticker)=>{\n            try {\n                const straddleData = await getStraddleData(ticker.ticker, null, 30);\n                return {\n                    ...ticker,\n                    straddleData\n                };\n            } catch (error) {\n                console.error(`Error processing ${ticker.ticker}:`, error.message);\n                return {\n                    ...ticker,\n                    error: error.message,\n                    straddleData: null\n                };\n            }\n        });\n        const batchResults = await Promise.all(batchPromises);\n        results.push(...batchResults);\n        // Add delay between batches to be respectful to Yahoo Finance\n        if (i + maxConcurrent < tickers.length) {\n            await new Promise((resolve)=>setTimeout(resolve, delayMs));\n        }\n    }\n    return results;\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { ticker, expiration, batch } = req.query;\n    try {\n        if (batch === \"true\") {\n            // Batch processing for automation\n            const { tickers } = req.body || {};\n            if (!tickers || !Array.isArray(tickers)) {\n                return res.status(400).json({\n                    error: \"Missing tickers array in request body for batch processing\"\n                });\n            }\n            const results = await getBatchStraddleData(tickers);\n            return res.status(200).json({\n                timestamp: new Date().toISOString(),\n                totalTickers: tickers.length,\n                results: results\n            });\n        } else if (ticker) {\n            // Single ticker processing\n            const straddleData = await getStraddleData(ticker, expiration);\n            return res.status(200).json(straddleData);\n        } else {\n            return res.status(400).json({\n                error: \"Missing required parameter: ticker or batch=true\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error in yahoo-finance-options API:\", error);\n        return res.status(500).json({\n            error: \"Failed to fetch options data\",\n            details:  true ? error.message : 0\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkveWFob28tZmluYW5jZS1vcHRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUUvQixxQ0FBcUM7QUFDckMsNERBQTREO0FBRTVELHNEQUFzRDtBQUN0RCxNQUFNQyxxQkFBcUI7QUFDM0IsTUFBTUMscUJBQXFCO0FBRTNCLDZDQUE2QztBQUM3QyxNQUFNQyxlQUFlLElBQUlDO0FBQ3pCLE1BQU1DLGlCQUFpQixJQUFJLEtBQUssTUFBTSxZQUFZO0FBRWxELDZDQUE2QztBQUM3QyxlQUFlQyxnQkFBZ0JDLE1BQU07SUFDbkMsSUFBSTtRQUNGLE1BQU1DLE1BQU0sQ0FBQyxFQUFFUCxtQkFBbUIsQ0FBQyxFQUFFTSxPQUFPLENBQUM7UUFDN0MsTUFBTUUsV0FBVyxNQUFNVCxpREFBS0EsQ0FBQ1E7UUFFN0IsSUFBSSxDQUFDQyxTQUFTQyxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJQyxNQUFNLENBQUMseUJBQXlCLEVBQUVGLFNBQVNHLE1BQU0sQ0FBQyxDQUFDO1FBQy9EO1FBRUEsTUFBTUMsT0FBTyxNQUFNSixTQUFTSyxJQUFJO1FBRWhDLElBQUksQ0FBQ0QsS0FBS0UsS0FBSyxJQUFJLENBQUNGLEtBQUtFLEtBQUssQ0FBQ0MsTUFBTSxJQUFJSCxLQUFLRSxLQUFLLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxLQUFLLEdBQUc7WUFDdkUsTUFBTSxJQUFJTixNQUFNO1FBQ2xCO1FBRUEsTUFBTUssU0FBU0gsS0FBS0UsS0FBSyxDQUFDQyxNQUFNLENBQUMsRUFBRTtRQUNuQyxNQUFNRSxlQUFlRixPQUFPRyxJQUFJLENBQUNDLGtCQUFrQjtRQUVuRCxPQUFPO1lBQ0xDLE9BQU9IO1lBQ1BJLFVBQVVOLE9BQU9HLElBQUksQ0FBQ0csUUFBUTtZQUM5QkMsVUFBVVAsT0FBT0csSUFBSSxDQUFDSyxZQUFZO1lBQ2xDQyxXQUFXVCxPQUFPRyxJQUFJLENBQUNPLGlCQUFpQjtRQUMxQztJQUNGLEVBQUUsT0FBT0MsT0FBTztR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QUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO2dCQUMxQmEsT0FBTztZQUNUO1FBQ0Y7SUFFRixFQUFFLE9BQU9BLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBT3lGLElBQUl4RyxNQUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO1lBQzFCYSxPQUFPO1lBQ1BpRyxTQUFTQyxLQUF5QixHQUFnQmxHLE1BQU1FLE9BQU8sR0FBRztRQUNwRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYWhmLWNhcGl0YWwtd2Vic2l0ZS8uL3BhZ2VzL2FwaS95YWhvby1maW5hbmNlLW9wdGlvbnMuanM/MzljYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5cbi8vIFlhaG9vIEZpbmFuY2UgT3B0aW9ucyBEYXRhIEZldGNoZXJcbi8vIFRoaXMgcmVwbGFjZXMgUG9seWdvbi5pbyBBUEkgY2FsbHMgdG8gYXZvaWQgcmF0ZSBsaW1pdGluZ1xuXG4vLyBZYWhvbyBGaW5hbmNlIEFQSSBlbmRwb2ludHMgKHVub2ZmaWNpYWwgYnV0IHN0YWJsZSlcbmNvbnN0IFlBSE9PX0ZJTkFOQ0VfQkFTRSA9ICdodHRwczovL3F1ZXJ5MS5maW5hbmNlLnlhaG9vLmNvbS92OC9maW5hbmNlL2NoYXJ0JztcbmNvbnN0IFlBSE9PX09QVElPTlNfQkFTRSA9ICdodHRwczovL3F1ZXJ5Mi5maW5hbmNlLnlhaG9vLmNvbS92Ny9maW5hbmNlL29wdGlvbnMnO1xuXG4vLyBDYWNoZSBmb3Igb3B0aW9ucyBkYXRhIHRvIHJlZHVjZSBBUEkgY2FsbHNcbmNvbnN0IG9wdGlvbnNDYWNoZSA9IG5ldyBNYXAoKTtcbmNvbnN0IENBQ0hFX0RVUkFUSU9OID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzXG5cbi8vIEdldCBjdXJyZW50IHN0b2NrIHByaWNlIGZyb20gWWFob28gRmluYW5jZVxuYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFByaWNlKHRpY2tlcikge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IGAke1lBSE9PX0ZJTkFOQ0VfQkFTRX0vJHt0aWNrZXJ9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBZYWhvbyBGaW5hbmNlIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgaWYgKCFkYXRhLmNoYXJ0IHx8ICFkYXRhLmNoYXJ0LnJlc3VsdCB8fCBkYXRhLmNoYXJ0LnJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcHJpY2UgZGF0YSBhdmFpbGFibGUnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gZGF0YS5jaGFydC5yZXN1bHRbMF07XG4gICAgY29uc3QgY3VycmVudFByaWNlID0gcmVzdWx0Lm1ldGEucmVndWxhck1hcmtldFByaWNlO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwcmljZTogY3VycmVudFByaWNlLFxuICAgICAgY3VycmVuY3k6IHJlc3VsdC5tZXRhLmN1cnJlbmN5LFxuICAgICAgZXhjaGFuZ2U6IHJlc3VsdC5tZXRhLmV4Y2hhbmdlTmFtZSxcbiAgICAgIHRpbWVzdGFtcDogcmVzdWx0Lm1ldGEucmVndWxhck1hcmtldFRpbWVcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGN1cnJlbnQgcHJpY2UgZm9yICR7dGlja2VyfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBHZXQgYXZhaWxhYmxlIGV4cGlyYXRpb24gZGF0ZXMgZm9yIGEgdGlja2VyXG5hc3luYyBmdW5jdGlvbiBnZXRFeHBpcmF0aW9uRGF0ZXModGlja2VyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gYCR7WUFIT09fT1BUSU9OU19CQVNFfS8ke3RpY2tlcn1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFlhaG9vIEZpbmFuY2Ugb3B0aW9ucyBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmICghZGF0YS5vcHRpb25DaGFpbiB8fCAhZGF0YS5vcHRpb25DaGFpbi5yZXN1bHQgfHwgZGF0YS5vcHRpb25DaGFpbi5yZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgZGF0YSBhdmFpbGFibGUnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gZGF0YS5vcHRpb25DaGFpbi5yZXN1bHRbMF07XG4gICAgY29uc3QgZXhwaXJhdGlvbnMgPSByZXN1bHQuZXhwaXJhdGlvbkRhdGVzIHx8IFtdO1xuICAgIFxuICAgIC8vIENvbnZlcnQgdGltZXN0YW1wcyB0byBkYXRlIHN0cmluZ3NcbiAgICBjb25zdCBleHBpcmF0aW9uRGF0ZXMgPSBleHBpcmF0aW9ucy5tYXAodGltZXN0YW1wID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKiAxMDAwKTtcbiAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgLy8gWVlZWS1NTS1ERCBmb3JtYXRcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gZXhwaXJhdGlvbkRhdGVzLnNvcnQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBleHBpcmF0aW9uIGRhdGVzIGZvciAke3RpY2tlcn06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gR2V0IG9wdGlvbnMgZGF0YSBmb3IgYSBzcGVjaWZpYyB0aWNrZXIgYW5kIGV4cGlyYXRpb25cbmFzeW5jIGZ1bmN0aW9uIGdldE9wdGlvbnNEYXRhKHRpY2tlciwgZXhwaXJhdGlvbkRhdGUpIHtcbiAgY29uc3QgY2FjaGVLZXkgPSBgJHt0aWNrZXJ9LSR7ZXhwaXJhdGlvbkRhdGV9YDtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgXG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gIGlmIChvcHRpb25zQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgIGNvbnN0IGNhY2hlZCA9IG9wdGlvbnNDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICAgIGlmIChub3cgLSBjYWNoZWQudGltZXN0YW1wIDwgQ0FDSEVfRFVSQVRJT04pIHtcbiAgICAgIHJldHVybiBjYWNoZWQuZGF0YTtcbiAgICB9XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBkYXRlIHRvIHRpbWVzdGFtcFxuICAgIGNvbnN0IGV4cGlyYXRpb25UaW1lc3RhbXAgPSBNYXRoLmZsb29yKG5ldyBEYXRlKGV4cGlyYXRpb25EYXRlKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICBjb25zdCB1cmwgPSBgJHtZQUhPT19PUFRJT05TX0JBU0V9LyR7dGlja2VyfT9kYXRlPSR7ZXhwaXJhdGlvblRpbWVzdGFtcH1gO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFlhaG9vIEZpbmFuY2Ugb3B0aW9ucyBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIGlmICghZGF0YS5vcHRpb25DaGFpbiB8fCAhZGF0YS5vcHRpb25DaGFpbi5yZXN1bHQgfHwgZGF0YS5vcHRpb25DaGFpbi5yZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgZGF0YSBhdmFpbGFibGUgZm9yIHRoaXMgZXhwaXJhdGlvbicpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBkYXRhLm9wdGlvbkNoYWluLnJlc3VsdFswXTtcbiAgICBjb25zdCBjdXJyZW50UHJpY2UgPSByZXN1bHQucXVvdGUucmVndWxhck1hcmtldFByaWNlO1xuICAgIFxuICAgIC8vIEZpbmQgQVRNIHN0cmlrZSBwcmljZSAoY2xvc2VzdCB0byBjdXJyZW50IHByaWNlKVxuICAgIGNvbnN0IGNhbGxzID0gcmVzdWx0Lm9wdGlvbnNbMF0/LmNhbGxzIHx8IFtdO1xuICAgIGNvbnN0IHB1dHMgPSByZXN1bHQub3B0aW9uc1swXT8ucHV0cyB8fCBbXTtcbiAgICBcbiAgICBpZiAoY2FsbHMubGVuZ3RoID09PSAwIHx8IHB1dHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgY29udHJhY3RzIGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGaW5kIHRoZSBzdHJpa2UgY2xvc2VzdCB0byBjdXJyZW50IHByaWNlXG4gICAgbGV0IGF0bVN0cmlrZSA9IG51bGw7XG4gICAgbGV0IG1pbkRpc3RhbmNlID0gSW5maW5pdHk7XG4gICAgXG4gICAgY2FsbHMuZm9yRWFjaChjYWxsID0+IHtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoY2FsbC5zdHJpa2UgLSBjdXJyZW50UHJpY2UpO1xuICAgICAgaWYgKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcbiAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgYXRtU3RyaWtlID0gY2FsbC5zdHJpa2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFhdG1TdHJpa2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgQVRNIHN0cmlrZSBwcmljZScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGaW5kIGNhbGwgYW5kIHB1dCBvcHRpb25zIGF0IEFUTSBzdHJpa2VcbiAgICBjb25zdCBhdG1DYWxsID0gY2FsbHMuZmluZChjYWxsID0+IGNhbGwuc3RyaWtlID09PSBhdG1TdHJpa2UpO1xuICAgIGNvbnN0IGF0bVB1dCA9IHB1dHMuZmluZChwdXQgPT4gcHV0LnN0cmlrZSA9PT0gYXRtU3RyaWtlKTtcbiAgICBcbiAgICBpZiAoIWF0bUNhbGwgfHwgIWF0bVB1dCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCBBVE0gY2FsbCBhbmQgcHV0IG9wdGlvbnMnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHN0cmFkZGxlIHByZW1pdW0gKHVzZSBtaWQgcHJpY2UpXG4gICAgY29uc3QgY2FsbE1pZCA9IChhdG1DYWxsLmJpZCArIGF0bUNhbGwuYXNrKSAvIDI7XG4gICAgY29uc3QgcHV0TWlkID0gKGF0bVB1dC5iaWQgKyBhdG1QdXQuYXNrKSAvIDI7XG4gICAgY29uc3QgdG90YWxQcmVtaXVtID0gY2FsbE1pZCArIHB1dE1pZDtcbiAgICBcbiAgICBjb25zdCBvcHRpb25zRGF0YSA9IHtcbiAgICAgIHRpY2tlcixcbiAgICAgIGV4cGlyYXRpb25EYXRlLFxuICAgICAgY3VycmVudFByaWNlLFxuICAgICAgc3RyaWtlUHJpY2U6IGF0bVN0cmlrZSxcbiAgICAgIGNhbGxPcHRpb246IHtcbiAgICAgICAgc3RyaWtlOiBhdG1DYWxsLnN0cmlrZSxcbiAgICAgICAgYmlkOiBhdG1DYWxsLmJpZCxcbiAgICAgICAgYXNrOiBhdG1DYWxsLmFzayxcbiAgICAgICAgbWlkOiBjYWxsTWlkLFxuICAgICAgICB2b2x1bWU6IGF0bUNhbGwudm9sdW1lLFxuICAgICAgICBvcGVuSW50ZXJlc3Q6IGF0bUNhbGwub3BlbkludGVyZXN0XG4gICAgICB9LFxuICAgICAgcHV0T3B0aW9uOiB7XG4gICAgICAgIHN0cmlrZTogYXRtUHV0LnN0cmlrZSxcbiAgICAgICAgYmlkOiBhdG1QdXQuYmlkLFxuICAgICAgICBhc2s6IGF0bVB1dC5hc2ssXG4gICAgICAgIG1pZDogcHV0TWlkLFxuICAgICAgICB2b2x1bWU6IGF0bVB1dC52b2x1bWUsXG4gICAgICAgIG9wZW5JbnRlcmVzdDogYXRtUHV0Lm9wZW5JbnRlcmVzdFxuICAgICAgfSxcbiAgICAgIHRvdGFsUHJlbWl1bSxcbiAgICAgIGRhdGFRdWFsaXR5OiAnaGlnaCcgLy8gWWFob28gRmluYW5jZSBkYXRhIGlzIGdlbmVyYWxseSByZWxpYWJsZVxuICAgIH07XG4gICAgXG4gICAgLy8gQ2FjaGUgdGhlIHJlc3VsdFxuICAgIG9wdGlvbnNDYWNoZS5zZXQoY2FjaGVLZXksIHtcbiAgICAgIGRhdGE6IG9wdGlvbnNEYXRhLFxuICAgICAgdGltZXN0YW1wOiBub3dcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gb3B0aW9uc0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgb3B0aW9ucyBkYXRhIGZvciAke3RpY2tlcn0gJHtleHBpcmF0aW9uRGF0ZX06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gRXN0aW1hdGUgc3RyYWRkbGUgcHJlbWl1bSB3aGVuIGV4YWN0IG9wdGlvbnMgZGF0YSBpcyBub3QgYXZhaWxhYmxlXG5mdW5jdGlvbiBlc3RpbWF0ZVN0cmFkZGxlUHJlbWl1bShjdXJyZW50UHJpY2UsIGRheXNUb0V4cGlyYXRpb24sIHZvbGF0aWxpdHkgPSAwLjMpIHtcbiAgLy8gU2ltcGxlIEJsYWNrLVNjaG9sZXMgYXBwcm94aW1hdGlvbiBmb3Igc3RyYWRkbGUgcHJlbWl1bVxuICBjb25zdCB0aW1lVG9FeHBpcmF0aW9uID0gZGF5c1RvRXhwaXJhdGlvbiAvIDM2NTtcbiAgY29uc3Qgc3FydFRpbWUgPSBNYXRoLnNxcnQodGltZVRvRXhwaXJhdGlvbik7XG4gIFxuICAvLyBBcHByb3hpbWF0ZSBBVE0gc3RyYWRkbGUgcHJlbWl1bSB1c2luZyB2b2xhdGlsaXR5XG4gIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIGNhbGN1bGF0aW9uIC0gaW4gcmVhbGl0eSwgeW91J2QgdXNlIHRoZSBmdWxsIEJsYWNrLVNjaG9sZXMgZm9ybXVsYVxuICBjb25zdCBlc3RpbWF0ZWRQcmVtaXVtID0gY3VycmVudFByaWNlICogdm9sYXRpbGl0eSAqIHNxcnRUaW1lICogMC40OyAvLyAwLjQgaXMgYW4gZW1waXJpY2FsIGZhY3RvclxuICBcbiAgcmV0dXJuIE1hdGgubWF4KGVzdGltYXRlZFByZW1pdW0sIGN1cnJlbnRQcmljZSAqIDAuMDEpOyAvLyBNaW5pbXVtIDElIG9mIHN0b2NrIHByaWNlXG59XG5cbi8vIEdldCBzdHJhZGRsZSBkYXRhIHdpdGggZmFsbGJhY2sgdG8gZXN0aW1hdGlvblxuYXN5bmMgZnVuY3Rpb24gZ2V0U3RyYWRkbGVEYXRhKHRpY2tlciwgZXhwaXJhdGlvbkRhdGUgPSBudWxsLCBkYXlzVG9FeHBpcmF0aW9uID0gMzApIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY3VycmVudCBwcmljZSBmaXJzdFxuICAgIGNvbnN0IHByaWNlRGF0YSA9IGF3YWl0IGdldEN1cnJlbnRQcmljZSh0aWNrZXIpO1xuICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IHByaWNlRGF0YS5wcmljZTtcbiAgICBcbiAgICAvLyBHZXQgYXZhaWxhYmxlIGV4cGlyYXRpb24gZGF0ZXNcbiAgICBsZXQgYXZhaWxhYmxlRXhwaXJhdGlvbnMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgYXZhaWxhYmxlRXhwaXJhdGlvbnMgPSBhd2FpdCBnZXRFeHBpcmF0aW9uRGF0ZXModGlja2VyKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZ2V0IGV4cGlyYXRpb24gZGF0ZXMgZm9yICR7dGlja2VyfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgbm8gZXhwaXJhdGlvbiBkYXRlIHByb3ZpZGVkLCByZXR1cm4gYXZhaWxhYmxlIGV4cGlyYXRpb25zIHdpdGhvdXQgZm9yY2luZyBhIHNlbGVjdGlvblxuICAgIGlmICghZXhwaXJhdGlvbkRhdGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpY2tlcixcbiAgICAgICAgY3VycmVudFByaWNlLFxuICAgICAgICBhdmFpbGFibGVFeHBpcmF0aW9ucyxcbiAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzZWxlY3QgYW4gZXhwaXJhdGlvbiBkYXRlIGZyb20gdGhlIGF2YWlsYWJsZSBvcHRpb25zJyxcbiAgICAgICAgc291cmNlOiAnZXhwaXJhdGlvbl9saXN0JyxcbiAgICAgICAgZGF0YVF1YWxpdHk6ICdub25lJ1xuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3RlZCBleHBpcmF0aW9uIGRhdGUgaXMgYXZhaWxhYmxlXG4gICAgaWYgKGF2YWlsYWJsZUV4cGlyYXRpb25zLmxlbmd0aCA+IDAgJiYgIWF2YWlsYWJsZUV4cGlyYXRpb25zLmluY2x1ZGVzKGV4cGlyYXRpb25EYXRlKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGlja2VyLFxuICAgICAgICBjdXJyZW50UHJpY2UsXG4gICAgICAgIHJlcXVlc3RlZEV4cGlyYXRpb246IGV4cGlyYXRpb25EYXRlLFxuICAgICAgICBhdmFpbGFibGVFeHBpcmF0aW9ucyxcbiAgICAgICAgbWVzc2FnZTogYFJlcXVlc3RlZCBleHBpcmF0aW9uIGRhdGUgJHtleHBpcmF0aW9uRGF0ZX0gaXMgbm90IGF2YWlsYWJsZWAsXG4gICAgICAgIHNvdXJjZTogJ2V4cGlyYXRpb25fbm90X2F2YWlsYWJsZScsXG4gICAgICAgIGRhdGFRdWFsaXR5OiAnbm9uZSdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFRyeSB0byBnZXQgcmVhbCBvcHRpb25zIGRhdGEgZm9yIHRoZSBzcGVjaWZpZWQgZXhwaXJhdGlvblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcHRpb25zRGF0YSA9IGF3YWl0IGdldE9wdGlvbnNEYXRhKHRpY2tlciwgZXhwaXJhdGlvbkRhdGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3B0aW9uc0RhdGEsXG4gICAgICAgIGF2YWlsYWJsZUV4cGlyYXRpb25zLFxuICAgICAgICBzb3VyY2U6ICd5YWhvb19maW5hbmNlJyxcbiAgICAgICAgZXhlY3V0aW9uRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGdldCBvcHRpb25zIGRhdGEgZm9yICR7dGlja2VyfSAke2V4cGlyYXRpb25EYXRlfSwgdXNpbmcgZXN0aW1hdGlvbjpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIFxuICAgICAgLy8gRmFsbGJhY2sgdG8gZXN0aW1hdGlvblxuICAgICAgY29uc3QgZXN0aW1hdGVkUHJlbWl1bSA9IGVzdGltYXRlU3RyYWRkbGVQcmVtaXVtKGN1cnJlbnRQcmljZSwgZGF5c1RvRXhwaXJhdGlvbik7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpY2tlcixcbiAgICAgICAgZXhwaXJhdGlvbkRhdGUsXG4gICAgICAgIGN1cnJlbnRQcmljZSxcbiAgICAgICAgc3RyaWtlUHJpY2U6IGN1cnJlbnRQcmljZSxcbiAgICAgICAgdG90YWxQcmVtaXVtOiBlc3RpbWF0ZWRQcmVtaXVtLFxuICAgICAgICBhdmFpbGFibGVFeHBpcmF0aW9ucyxcbiAgICAgICAgc291cmNlOiAnZXN0aW1hdGlvbicsXG4gICAgICAgIGV4ZWN1dGlvbkRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICBkYXRhUXVhbGl0eTogJ21lZGl1bScsXG4gICAgICAgIG5vdGU6ICdQcmVtaXVtIGVzdGltYXRlZCB1c2luZyBCbGFjay1TY2hvbGVzIGFwcHJveGltYXRpb24nXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIHN0cmFkZGxlIGRhdGEgZm9yICR7dGlja2VyfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBCYXRjaCBwcm9jZXNzIG11bHRpcGxlIHRpY2tlcnMgd2l0aCByYXRlIGxpbWl0aW5nXG5hc3luYyBmdW5jdGlvbiBnZXRCYXRjaFN0cmFkZGxlRGF0YSh0aWNrZXJzLCBtYXhDb25jdXJyZW50ID0gMywgZGVsYXlNcyA9IDEwMDApIHtcbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aWNrZXJzLmxlbmd0aDsgaSArPSBtYXhDb25jdXJyZW50KSB7XG4gICAgY29uc3QgYmF0Y2ggPSB0aWNrZXJzLnNsaWNlKGksIGkgKyBtYXhDb25jdXJyZW50KTtcbiAgICBcbiAgICBjb25zdCBiYXRjaFByb21pc2VzID0gYmF0Y2gubWFwKGFzeW5jICh0aWNrZXIpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0cmFkZGxlRGF0YSA9IGF3YWl0IGdldFN0cmFkZGxlRGF0YSh0aWNrZXIudGlja2VyLCBudWxsLCAzMCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4udGlja2VyLFxuICAgICAgICAgIHN0cmFkZGxlRGF0YVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyAke3RpY2tlci50aWNrZXJ9OmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnRpY2tlcixcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdHJhZGRsZURhdGE6IG51bGxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBiYXRjaFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFByb21pc2VzKTtcbiAgICByZXN1bHRzLnB1c2goLi4uYmF0Y2hSZXN1bHRzKTtcbiAgICBcbiAgICAvLyBBZGQgZGVsYXkgYmV0d2VlbiBiYXRjaGVzIHRvIGJlIHJlc3BlY3RmdWwgdG8gWWFob28gRmluYW5jZVxuICAgIGlmIChpICsgbWF4Q29uY3VycmVudCA8IHRpY2tlcnMubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXlNcykpO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgY29uc3QgeyB0aWNrZXIsIGV4cGlyYXRpb24sIGJhdGNoIH0gPSByZXEucXVlcnk7XG5cbiAgdHJ5IHtcbiAgICBpZiAoYmF0Y2ggPT09ICd0cnVlJykge1xuICAgICAgLy8gQmF0Y2ggcHJvY2Vzc2luZyBmb3IgYXV0b21hdGlvblxuICAgICAgY29uc3QgeyB0aWNrZXJzIH0gPSByZXEuYm9keSB8fCB7fTtcbiAgICAgIFxuICAgICAgaWYgKCF0aWNrZXJzIHx8ICFBcnJheS5pc0FycmF5KHRpY2tlcnMpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnTWlzc2luZyB0aWNrZXJzIGFycmF5IGluIHJlcXVlc3QgYm9keSBmb3IgYmF0Y2ggcHJvY2Vzc2luZydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBnZXRCYXRjaFN0cmFkZGxlRGF0YSh0aWNrZXJzKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHRvdGFsVGlja2VyczogdGlja2Vycy5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHNcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGlja2VyKSB7XG4gICAgICAvLyBTaW5nbGUgdGlja2VyIHByb2Nlc3NpbmdcbiAgICAgIGNvbnN0IHN0cmFkZGxlRGF0YSA9IGF3YWl0IGdldFN0cmFkZGxlRGF0YSh0aWNrZXIsIGV4cGlyYXRpb24pO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oc3RyYWRkbGVEYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXI6IHRpY2tlciBvciBiYXRjaD10cnVlJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4geWFob28tZmluYW5jZS1vcHRpb25zIEFQSTonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG9wdGlvbnMgZGF0YScsXG4gICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnUGxlYXNlIHRyeSBhZ2FpbiBsYXRlcidcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImZldGNoIiwiWUFIT09fRklOQU5DRV9CQVNFIiwiWUFIT09fT1BUSU9OU19CQVNFIiwib3B0aW9uc0NhY2hlIiwiTWFwIiwiQ0FDSEVfRFVSQVRJT04iLCJnZXRDdXJyZW50UHJpY2UiLCJ0aWNrZXIiLCJ1cmwiLCJyZXNwb25zZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImNoYXJ0IiwicmVzdWx0IiwibGVuZ3RoIiwiY3VycmVudFByaWNlIiwibWV0YSIsInJlZ3VsYXJNYXJrZXRQcmljZSIsInByaWNlIiwiY3VycmVuY3kiLCJleGNoYW5nZSIsImV4Y2hhbmdlTmFtZSIsInRpbWVzdGFtcCIsInJlZ3VsYXJNYXJrZXRUaW1lIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImdldEV4cGlyYXRpb25EYXRlcyIsIm9wdGlvbkNoYWluIiwiZXhwaXJhdGlvbnMiLCJleHBpcmF0aW9uRGF0ZXMiLCJtYXAiLCJkYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJzb3J0IiwiZ2V0T3B0aW9uc0RhdGEiLCJleHBpcmF0aW9uRGF0ZSIsImNhY2hlS2V5Iiwibm93IiwiaGFzIiwiY2FjaGVkIiwiZ2V0IiwiZXhwaXJhdGlvblRpbWVzdGFtcCIsIk1hdGgiLCJmbG9vciIsImdldFRpbWUiLCJxdW90ZSIsImNhbGxzIiwib3B0aW9ucyIsInB1dHMiLCJhdG1TdHJpa2UiLCJtaW5EaXN0YW5jZSIsIkluZmluaXR5IiwiZm9yRWFjaCIsImNhbGwiLCJkaXN0YW5jZSIsImFicyIsInN0cmlrZSIsImF0bUNhbGwiLCJmaW5kIiwiYXRtUHV0IiwicHV0IiwiY2FsbE1pZCIsImJpZCIsImFzayIsInB1dE1pZCIsInRvdGFsUHJlbWl1bSIsIm9wdGlvbnNEYXRhIiwic3RyaWtlUHJpY2UiLCJjYWxsT3B0aW9uIiwibWlkIiwidm9sdW1lIiwib3BlbkludGVyZXN0IiwicHV0T3B0aW9uIiwiZGF0YVF1YWxpdHkiLCJzZXQiLCJlc3RpbWF0ZVN0cmFkZGxlUHJlbWl1bSIsImRheXNUb0V4cGlyYXRpb24iLCJ2b2xhdGlsaXR5IiwidGltZVRvRXhwaXJhdGlvbiIsInNxcnRUaW1lIiwic3FydCIsImVzdGltYXRlZFByZW1pdW0iLCJtYXgiLCJnZXRTdHJhZGRsZURhdGEiLCJwcmljZURhdGEiLCJhdmFpbGFibGVFeHBpcmF0aW9ucyIsIndhcm4iLCJzb3VyY2UiLCJpbmNsdWRlcyIsInJlcXVlc3RlZEV4cGlyYXRpb24iLCJleGVjdXRpb25EYXRlIiwibm90ZSIsImdldEJhdGNoU3RyYWRkbGVEYXRhIiwidGlja2VycyIsIm1heENvbmN1cnJlbnQiLCJkZWxheU1zIiwicmVzdWx0cyIsImkiLCJiYXRjaCIsInNsaWNlIiwiYmF0Y2hQcm9taXNlcyIsInN0cmFkZGxlRGF0YSIsImJhdGNoUmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJwdXNoIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiZXhwaXJhdGlvbiIsInF1ZXJ5IiwiYm9keSIsIkFycmF5IiwiaXNBcnJheSIsInRvdGFsVGlja2VycyIsImRldGFpbHMiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/yahoo-finance-options.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fyahoo-finance-options&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cyahoo-finance-options.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();