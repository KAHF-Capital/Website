"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/iron-condor-analysis";
exports.ids = ["pages/api/iron-condor-analysis"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Firon-condor-analysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ciron-condor-analysis.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Firon-condor-analysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ciron-condor-analysis.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_iron_condor_analysis_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\iron-condor-analysis.js */ \"(api)/./pages/api/iron-condor-analysis.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_iron_condor_analysis_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_iron_condor_analysis_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/iron-condor-analysis\",\n        pathname: \"/api/iron-condor-analysis\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_iron_condor_analysis_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmlyb24tY29uZG9yLWFuYWx5c2lzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNpcm9uLWNvbmRvci1hbmFseXNpcy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNrRTtBQUNsRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2thaGYtY2FwaXRhbC13ZWJzaXRlLz85OWFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcaXJvbi1jb25kb3ItYW5hbHlzaXMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pcm9uLWNvbmRvci1hbmFseXNpc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2lyb24tY29uZG9yLWFuYWx5c2lzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Firon-condor-analysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ciron-condor-analysis.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/iron-condor-analysis.js":
/*!*******************************************!*\
  !*** ./pages/api/iron-condor-analysis.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const { ticker, shortCallStrike, shortPutStrike, longCallStrike, longPutStrike, totalCredit, totalDebit, currentPrice, daysToExpiration } = req.body;\n    if (!ticker || !shortCallStrike || !shortPutStrike || !longCallStrike || !longPutStrike) {\n        return res.status(400).json({\n            error: \"Missing required parameters: ticker and all strike prices are required\"\n        });\n    }\n    // Validate Iron Condor setup\n    if (longPutStrike >= shortPutStrike || shortPutStrike >= shortCallStrike || shortCallStrike >= longCallStrike) {\n        return res.status(400).json({\n            error: \"Invalid Iron Condor setup. Strikes must follow: Long Put < Short Put < Short Call < Long Call\"\n        });\n    }\n    const effectivePrice = currentPrice || shortCallStrike;\n    try {\n        const netCredit = (totalCredit || 0) - (totalDebit || 0);\n        // Calculate breakeven points\n        const upperBreakeven = parseFloat(shortCallStrike) + netCredit;\n        const lowerBreakeven = parseFloat(shortPutStrike) - netCredit;\n        const upperBreakevenPct = (upperBreakeven - effectivePrice) / effectivePrice;\n        const lowerBreakevenPct = (lowerBreakeven - effectivePrice) / effectivePrice;\n        // Fetch historical data for analysis\n        const historicalData = await fetchHistoricalData(ticker, daysToExpiration || 30);\n        // Analyze historical profitability for Iron Condor\n        const analysis = analyzeIronCondorProfitability(historicalData, upperBreakevenPct, lowerBreakevenPct, parseFloat(shortCallStrike), parseFloat(shortPutStrike), netCredit);\n        res.status(200).json(analysis);\n    } catch (error) {\n        console.error(\"Error in Iron Condor analysis:\", error);\n        res.status(500).json({\n            error: \"Failed to perform analysis\"\n        });\n    }\n}\n// Fetch historical price data\nasync function fetchHistoricalData(ticker, daysToExpiration) {\n    try {\n        // Using Alpha Vantage API for historical data\n        const apiKey = process.env.ALPHA_VANTAGE_API_KEY || \"demo\";\n        const url = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${ticker}&apikey=${apiKey}`;\n        const response = await fetch(url);\n        const data = await response.json();\n        if (data[\"Error Message\"]) {\n            console.log(`Alpha Vantage error for ${ticker}:`, data[\"Error Message\"]);\n            throw new Error(\"Invalid ticker symbol\");\n        }\n        if (data[\"Note\"]) {\n            // API limit reached, return mock historical data\n            console.log(`Alpha Vantage API limit reached for ${ticker}, using mock data`);\n            return generateMockHistoricalData(daysToExpiration);\n        }\n        const timeSeries = data[\"Time Series (Daily)\"];\n        if (!timeSeries) {\n            console.log(`No time series data for ${ticker}`);\n            throw new Error(\"No historical data available\");\n        }\n        // Convert to array and sort by date\n        const historicalPrices = Object.entries(timeSeries).map(([date, values])=>({\n                date,\n                price: parseFloat(values[\"4. close\"])\n            })).filter((item)=>!isNaN(item.price) && item.price > 0) // Filter out invalid prices\n        .sort((a, b)=>new Date(a.date) - new Date(b.date));\n        if (historicalPrices.length === 0) {\n            console.log(`No valid price data for ${ticker}`);\n            throw new Error(\"No valid historical price data\");\n        }\n        // Calculate price movements for the specified period\n        const movements = calculatePriceMovements(historicalPrices, daysToExpiration);\n        if (movements.length === 0) {\n            console.log(`No price movements calculated for ${ticker}, using mock data`);\n            return generateMockHistoricalData(daysToExpiration);\n        }\n        // Use all available movements, even if less than traditional minimums\n        console.log(`Found ${movements.length} price movements for ${ticker} Iron Condor analysis`);\n        return movements;\n    } catch (error) {\n        console.error(`Error fetching historical data for ${ticker}:`, error.message);\n        // Return mock data as fallback\n        return generateMockHistoricalData(daysToExpiration);\n    }\n}\n// Calculate price movements over specified period\nfunction calculatePriceMovements(historicalPrices, daysToExpiration) {\n    const movements = [];\n    // Ensure we have enough data points\n    if (historicalPrices.length < daysToExpiration + 1) {\n        return movements;\n    }\n    for(let i = 0; i < historicalPrices.length - daysToExpiration; i++){\n        const startPrice = historicalPrices[i].price;\n        const endPrice = historicalPrices[i + daysToExpiration].price;\n        // Only include valid price data\n        if (startPrice > 0 && endPrice > 0) {\n            const percentMove = (endPrice - startPrice) / startPrice;\n            movements.push({\n                startDate: historicalPrices[i].date,\n                endDate: historicalPrices[i + daysToExpiration].date,\n                startPrice,\n                endPrice,\n                percentMove\n            });\n        }\n    }\n    return movements;\n}\n// Generate mock historical data for demo purposes\nfunction generateMockHistoricalData(daysToExpiration) {\n    const movements = [];\n    const basePrice = 100;\n    const volatility = 0.02; // 2% daily volatility\n    // Use all available data points, no arbitrary limits\n    const samples = Math.max(10, Math.min(500 - daysToExpiration, 1000));\n    for(let i = 0; i < samples; i++){\n        let cumulativeMove = 0;\n        let currentPrice = basePrice;\n        for(let day = 0; day < daysToExpiration; day++){\n            const randomMove = (Math.random() - 0.5) * volatility * 2;\n            const meanReversion = (basePrice - currentPrice) * 0.0005;\n            const dailyMove = randomMove + meanReversion;\n            cumulativeMove += dailyMove;\n            currentPrice = currentPrice * (1 + dailyMove);\n        }\n        const startDate = new Date();\n        startDate.setDate(startDate.getDate() - (samples - i) * 2);\n        const endDate = new Date(startDate);\n        endDate.setDate(endDate.getDate() + daysToExpiration);\n        movements.push({\n            startDate: startDate.toISOString().split(\"T\")[0],\n            endDate: endDate.toISOString().split(\"T\")[0],\n            startPrice: basePrice,\n            endPrice: basePrice * (1 + cumulativeMove),\n            percentMove: cumulativeMove\n        });\n    }\n    return movements;\n}\n// Analyze profitability specifically for Iron Condor strategy (simplified like straddle)\nfunction analyzeIronCondorProfitability(historicalData, upperBreakevenPct, lowerBreakevenPct, shortCallStrike, shortPutStrike, netCredit) {\n    let inProfitZoneCount = 0;\n    let aboveUpperBreakevenCount = 0;\n    let belowLowerBreakevenCount = 0;\n    let totalValidSamples = 0;\n    // Ensure we have data to work with\n    if (!historicalData || historicalData.length === 0) {\n        return {\n            inProfitZone: 0,\n            aboveUpperBreakeven: 0,\n            belowLowerBreakeven: 0,\n            totalSamples: 0,\n            profitableRate: 0,\n            upperBreakevenPct: upperBreakevenPct * 100,\n            lowerBreakevenPct: lowerBreakevenPct * 100,\n            avgMove: 0,\n            maxMove: 0,\n            minMove: 0,\n            dataQuality: \"none\"\n        };\n    }\n    // Filter out extreme outliers (more than 50% moves in either direction) - same as straddle\n    let filteredData = historicalData.filter((movement)=>{\n        const absMove = Math.abs(movement.percentMove);\n        return absMove <= 0.5; // Filter out moves > 50%\n    });\n    if (filteredData.length === 0) {\n        // If all data is filtered out, use original data\n        filteredData = historicalData;\n    }\n    filteredData.forEach((movement)=>{\n        const percentMove = movement.percentMove;\n        // Iron Condor is profitable when price stays between breakeven points\n        if (percentMove < upperBreakevenPct && percentMove > lowerBreakevenPct) {\n            inProfitZoneCount++;\n        }\n        // Track losses outside profit zone\n        if (percentMove >= upperBreakevenPct) {\n            aboveUpperBreakevenCount++;\n        }\n        if (percentMove <= lowerBreakevenPct) {\n            belowLowerBreakevenCount++;\n        }\n        totalValidSamples++;\n    });\n    const profitableRate = totalValidSamples > 0 ? inProfitZoneCount / totalValidSamples * 100 : 0;\n    // Calculate additional metrics safely - same as straddle\n    const avgMove = filteredData.length > 0 ? filteredData.reduce((sum, m)=>sum + Math.abs(m.percentMove), 0) / filteredData.length : 0;\n    const maxMove = filteredData.length > 0 ? Math.max(...filteredData.map((m)=>Math.abs(m.percentMove))) : 0;\n    const minMove = filteredData.length > 0 ? Math.min(...filteredData.map((m)=>Math.abs(m.percentMove))) : 0;\n    return {\n        inProfitZone: inProfitZoneCount,\n        aboveUpperBreakeven: aboveUpperBreakevenCount,\n        belowLowerBreakeven: belowLowerBreakevenCount,\n        totalSamples: totalValidSamples,\n        profitableRate,\n        upperBreakevenPct: upperBreakevenPct * 100,\n        lowerBreakevenPct: lowerBreakevenPct * 100,\n        avgMove: avgMove * 100,\n        maxMove: maxMove * 100,\n        minMove: minMove * 100,\n        dataQuality: totalValidSamples >= 50 ? \"high\" : totalValidSamples >= 20 ? \"medium\" : totalValidSamples >= 5 ? \"low\" : \"limited\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvaXJvbi1jb25kb3ItYW5hbHlzaXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFlLGVBQWVBLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxNQUFNLEVBQ0pDLE1BQU0sRUFDTkMsZUFBZSxFQUNmQyxjQUFjLEVBQ2RDLGNBQWMsRUFDZEMsYUFBYSxFQUNiQyxXQUFXLEVBQ1hDLFVBQVUsRUFDVkMsWUFBWSxFQUNaQyxnQkFBZ0IsRUFDakIsR0FBR2QsSUFBSWUsSUFBSTtJQUVaLElBQUksQ0FBQ1QsVUFBVSxDQUFDQyxtQkFBbUIsQ0FBQ0Msa0JBQWtCLENBQUNDLGtCQUFrQixDQUFDQyxlQUFlO1FBQ3ZGLE9BQU9ULElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87UUFDVDtJQUNGO0lBRUEsNkJBQTZCO0lBQzdCLElBQUlLLGlCQUFpQkYsa0JBQWtCQSxrQkFBa0JELG1CQUNyREEsbUJBQW1CRSxnQkFBZ0I7UUFDckMsT0FBT1IsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsT0FBTztRQUNUO0lBQ0Y7SUFFQSxNQUFNVyxpQkFBaUJILGdCQUFnQk47SUFFdkMsSUFBSTtRQUNGLE1BQU1VLFlBQVksQ0FBQ04sZUFBZSxLQUFNQyxDQUFBQSxjQUFjO1FBRXRELDZCQUE2QjtRQUM3QixNQUFNTSxpQkFBaUJDLFdBQVdaLG1CQUFtQlU7UUFDckQsTUFBTUcsaUJBQWlCRCxXQUFXWCxrQkFBa0JTO1FBRXBELE1BQU1JLG9CQUFvQixDQUFDSCxpQkFBaUJGLGNBQWEsSUFBS0E7UUFDOUQsTUFBTU0sb0JBQW9CLENBQUNGLGlCQUFpQkosY0FBYSxJQUFLQTtRQUU5RCxxQ0FBcUM7UUFDckMsTUFBTU8saUJB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QUcsSUFBSXdCLGFBQWFuRCxHQUFHLENBQUMwRCxDQUFBQSxJQUFLakMsS0FBSzZCLEdBQUcsQ0FBQ0ksRUFBRXhDLFdBQVcsTUFBTTtJQUVoRSxPQUFPO1FBQ0x3QixjQUFjSjtRQUNkSyxxQkFBcUJKO1FBQ3JCSyxxQkFBcUJKO1FBQ3JCSyxjQUFjSjtRQUNkSztRQUNBcEUsbUJBQW1CQSxvQkFBb0I7UUFDdkNDLG1CQUFtQkEsb0JBQW9CO1FBQ3ZDb0UsU0FBU0EsVUFBVTtRQUNuQkMsU0FBU0EsVUFBVTtRQUNuQkMsU0FBU0EsVUFBVTtRQUNuQkMsYUFBYVQscUJBQXFCLEtBQUssU0FBU0EscUJBQXFCLEtBQUssV0FBV0EscUJBQXFCLElBQUksUUFBUTtJQUN4SDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2FoZi1jYXBpdGFsLXdlYnNpdGUvLi9wYWdlcy9hcGkvaXJvbi1jb25kb3ItYW5hbHlzaXMuanM/ZDY4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICBjb25zdCB7IFxuICAgIHRpY2tlciwgXG4gICAgc2hvcnRDYWxsU3RyaWtlLCBcbiAgICBzaG9ydFB1dFN0cmlrZSwgXG4gICAgbG9uZ0NhbGxTdHJpa2UsIFxuICAgIGxvbmdQdXRTdHJpa2UsXG4gICAgdG90YWxDcmVkaXQsXG4gICAgdG90YWxEZWJpdCxcbiAgICBjdXJyZW50UHJpY2UsXG4gICAgZGF5c1RvRXhwaXJhdGlvbiBcbiAgfSA9IHJlcS5ib2R5O1xuXG4gIGlmICghdGlja2VyIHx8ICFzaG9ydENhbGxTdHJpa2UgfHwgIXNob3J0UHV0U3RyaWtlIHx8ICFsb25nQ2FsbFN0cmlrZSB8fCAhbG9uZ1B1dFN0cmlrZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcnM6IHRpY2tlciBhbmQgYWxsIHN0cmlrZSBwcmljZXMgYXJlIHJlcXVpcmVkJyBcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZhbGlkYXRlIElyb24gQ29uZG9yIHNldHVwXG4gIGlmIChsb25nUHV0U3RyaWtlID49IHNob3J0UHV0U3RyaWtlIHx8IHNob3J0UHV0U3RyaWtlID49IHNob3J0Q2FsbFN0cmlrZSB8fCBcbiAgICAgIHNob3J0Q2FsbFN0cmlrZSA+PSBsb25nQ2FsbFN0cmlrZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgZXJyb3I6ICdJbnZhbGlkIElyb24gQ29uZG9yIHNldHVwLiBTdHJpa2VzIG11c3QgZm9sbG93OiBMb25nIFB1dCA8IFNob3J0IFB1dCA8IFNob3J0IENhbGwgPCBMb25nIENhbGwnIFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgZWZmZWN0aXZlUHJpY2UgPSBjdXJyZW50UHJpY2UgfHwgc2hvcnRDYWxsU3RyaWtlO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgbmV0Q3JlZGl0ID0gKHRvdGFsQ3JlZGl0IHx8IDApIC0gKHRvdGFsRGViaXQgfHwgMCk7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGJyZWFrZXZlbiBwb2ludHNcbiAgICBjb25zdCB1cHBlckJyZWFrZXZlbiA9IHBhcnNlRmxvYXQoc2hvcnRDYWxsU3RyaWtlKSArIG5ldENyZWRpdDtcbiAgICBjb25zdCBsb3dlckJyZWFrZXZlbiA9IHBhcnNlRmxvYXQoc2hvcnRQdXRTdHJpa2UpIC0gbmV0Q3JlZGl0O1xuICAgIFxuICAgIGNvbnN0IHVwcGVyQnJlYWtldmVuUGN0ID0gKHVwcGVyQnJlYWtldmVuIC0gZWZmZWN0aXZlUHJpY2UpIC8gZWZmZWN0aXZlUHJpY2U7XG4gICAgY29uc3QgbG93ZXJCcmVha2V2ZW5QY3QgPSAobG93ZXJCcmVha2V2ZW4gLSBlZmZlY3RpdmVQcmljZSkgLyBlZmZlY3RpdmVQcmljZTtcblxuICAgIC8vIEZldGNoIGhpc3RvcmljYWwgZGF0YSBmb3IgYW5hbHlzaXNcbiAgICBjb25zdCBoaXN0b3JpY2FsRGF0YSA9IGF3YWl0IGZldGNoSGlzdG9yaWNhbERhdGEodGlja2VyLCBkYXlzVG9FeHBpcmF0aW9uIHx8IDMwKTtcbiAgICBcbiAgICAvLyBBbmFseXplIGhpc3RvcmljYWwgcHJvZml0YWJpbGl0eSBmb3IgSXJvbiBDb25kb3JcbiAgICBjb25zdCBhbmFseXNpcyA9IGFuYWx5emVJcm9uQ29uZG9yUHJvZml0YWJpbGl0eShcbiAgICAgIGhpc3RvcmljYWxEYXRhLCBcbiAgICAgIHVwcGVyQnJlYWtldmVuUGN0LCBcbiAgICAgIGxvd2VyQnJlYWtldmVuUGN0LFxuICAgICAgcGFyc2VGbG9hdChzaG9ydENhbGxTdHJpa2UpLFxuICAgICAgcGFyc2VGbG9hdChzaG9ydFB1dFN0cmlrZSksXG4gICAgICBuZXRDcmVkaXRcbiAgICApO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oYW5hbHlzaXMpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIElyb24gQ29uZG9yIGFuYWx5c2lzOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHBlcmZvcm0gYW5hbHlzaXMnIH0pO1xuICB9XG59XG5cbi8vIEZldGNoIGhpc3RvcmljYWwgcHJpY2UgZGF0YVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hIaXN0b3JpY2FsRGF0YSh0aWNrZXIsIGRheXNUb0V4cGlyYXRpb24pIHtcbiAgdHJ5IHtcbiAgICAvLyBVc2luZyBBbHBoYSBWYW50YWdlIEFQSSBmb3IgaGlzdG9yaWNhbCBkYXRhXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQUxQSEFfVkFOVEFHRV9BUElfS0VZIHx8ICdkZW1vJztcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuYWxwaGF2YW50YWdlLmNvL3F1ZXJ5P2Z1bmN0aW9uPVRJTUVfU0VSSUVTX0RBSUxZJnN5bWJvbD0ke3RpY2tlcn0mYXBpa2V5PSR7YXBpS2V5fWA7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoZGF0YVsnRXJyb3IgTWVzc2FnZSddKSB7XG4gICAgICBjb25zb2xlLmxvZyhgQWxwaGEgVmFudGFnZSBlcnJvciBmb3IgJHt0aWNrZXJ9OmAsIGRhdGFbJ0Vycm9yIE1lc3NhZ2UnXSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdGlja2VyIHN5bWJvbCcpO1xuICAgIH1cblxuICAgIGlmIChkYXRhWydOb3RlJ10pIHtcbiAgICAgIC8vIEFQSSBsaW1pdCByZWFjaGVkLCByZXR1cm4gbW9jayBoaXN0b3JpY2FsIGRhdGFcbiAgICAgIGNvbnNvbGUubG9nKGBBbHBoYSBWYW50YWdlIEFQSSBsaW1pdCByZWFjaGVkIGZvciAke3RpY2tlcn0sIHVzaW5nIG1vY2sgZGF0YWApO1xuICAgICAgcmV0dXJuIGdlbmVyYXRlTW9ja0hpc3RvcmljYWxEYXRhKGRheXNUb0V4cGlyYXRpb24pO1xuICAgIH1cblxuICAgIGNvbnN0IHRpbWVTZXJpZXMgPSBkYXRhWydUaW1lIFNlcmllcyAoRGFpbHkpJ107XG4gICAgaWYgKCF0aW1lU2VyaWVzKSB7XG4gICAgICBjb25zb2xlLmxvZyhgTm8gdGltZSBzZXJpZXMgZGF0YSBmb3IgJHt0aWNrZXJ9YCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGhpc3RvcmljYWwgZGF0YSBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRvIGFycmF5IGFuZCBzb3J0IGJ5IGRhdGVcbiAgICBjb25zdCBoaXN0b3JpY2FsUHJpY2VzID0gT2JqZWN0LmVudHJpZXModGltZVNlcmllcylcbiAgICAgIC5tYXAoKFtkYXRlLCB2YWx1ZXNdKSA9PiAoe1xuICAgICAgICBkYXRlLFxuICAgICAgICBwcmljZTogcGFyc2VGbG9hdCh2YWx1ZXNbJzQuIGNsb3NlJ10pXG4gICAgICB9KSlcbiAgICAgIC5maWx0ZXIoaXRlbSA9PiAhaXNOYU4oaXRlbS5wcmljZSkgJiYgaXRlbS5wcmljZSA+IDApIC8vIEZpbHRlciBvdXQgaW52YWxpZCBwcmljZXNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpIC0gbmV3IERhdGUoYi5kYXRlKSk7XG5cbiAgICBpZiAoaGlzdG9yaWNhbFByaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGBObyB2YWxpZCBwcmljZSBkYXRhIGZvciAke3RpY2tlcn1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsaWQgaGlzdG9yaWNhbCBwcmljZSBkYXRhJyk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHByaWNlIG1vdmVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBwZXJpb2RcbiAgICBjb25zdCBtb3ZlbWVudHMgPSBjYWxjdWxhdGVQcmljZU1vdmVtZW50cyhoaXN0b3JpY2FsUHJpY2VzLCBkYXlzVG9FeHBpcmF0aW9uKTtcbiAgICBcbiAgICBpZiAobW92ZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coYE5vIHByaWNlIG1vdmVtZW50cyBjYWxjdWxhdGVkIGZvciAke3RpY2tlcn0sIHVzaW5nIG1vY2sgZGF0YWApO1xuICAgICAgcmV0dXJuIGdlbmVyYXRlTW9ja0hpc3RvcmljYWxEYXRhKGRheXNUb0V4cGlyYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFVzZSBhbGwgYXZhaWxhYmxlIG1vdmVtZW50cywgZXZlbiBpZiBsZXNzIHRoYW4gdHJhZGl0aW9uYWwgbWluaW11bXNcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgJHttb3ZlbWVudHMubGVuZ3RofSBwcmljZSBtb3ZlbWVudHMgZm9yICR7dGlja2VyfSBJcm9uIENvbmRvciBhbmFseXNpc2ApO1xuICAgIHJldHVybiBtb3ZlbWVudHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgaGlzdG9yaWNhbCBkYXRhIGZvciAke3RpY2tlcn06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgLy8gUmV0dXJuIG1vY2sgZGF0YSBhcyBmYWxsYmFja1xuICAgIHJldHVybiBnZW5lcmF0ZU1vY2tIaXN0b3JpY2FsRGF0YShkYXlzVG9FeHBpcmF0aW9uKTtcbiAgfVxufVxuXG4vLyBDYWxjdWxhdGUgcHJpY2UgbW92ZW1lbnRzIG92ZXIgc3BlY2lmaWVkIHBlcmlvZFxuZnVuY3Rpb24gY2FsY3VsYXRlUHJpY2VNb3ZlbWVudHMoaGlzdG9yaWNhbFByaWNlcywgZGF5c1RvRXhwaXJhdGlvbikge1xuICBjb25zdCBtb3ZlbWVudHMgPSBbXTtcbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIGVub3VnaCBkYXRhIHBvaW50c1xuICBpZiAoaGlzdG9yaWNhbFByaWNlcy5sZW5ndGggPCBkYXlzVG9FeHBpcmF0aW9uICsgMSkge1xuICAgIHJldHVybiBtb3ZlbWVudHM7XG4gIH1cbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaGlzdG9yaWNhbFByaWNlcy5sZW5ndGggLSBkYXlzVG9FeHBpcmF0aW9uOyBpKyspIHtcbiAgICBjb25zdCBzdGFydFByaWNlID0gaGlzdG9yaWNhbFByaWNlc1tpXS5wcmljZTtcbiAgICBjb25zdCBlbmRQcmljZSA9IGhpc3RvcmljYWxQcmljZXNbaSArIGRheXNUb0V4cGlyYXRpb25dLnByaWNlO1xuICAgIFxuICAgIC8vIE9ubHkgaW5jbHVkZSB2YWxpZCBwcmljZSBkYXRhXG4gICAgaWYgKHN0YXJ0UHJpY2UgPiAwICYmIGVuZFByaWNlID4gMCkge1xuICAgICAgY29uc3QgcGVyY2VudE1vdmUgPSAoZW5kUHJpY2UgLSBzdGFydFByaWNlKSAvIHN0YXJ0UHJpY2U7XG4gICAgICBcbiAgICAgIG1vdmVtZW50cy5wdXNoKHtcbiAgICAgICAgc3RhcnREYXRlOiBoaXN0b3JpY2FsUHJpY2VzW2ldLmRhdGUsXG4gICAgICAgIGVuZERhdGU6IGhpc3RvcmljYWxQcmljZXNbaSArIGRheXNUb0V4cGlyYXRpb25dLmRhdGUsXG4gICAgICAgIHN0YXJ0UHJpY2UsXG4gICAgICAgIGVuZFByaWNlLFxuICAgICAgICBwZXJjZW50TW92ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbW92ZW1lbnRzO1xufVxuXG4vLyBHZW5lcmF0ZSBtb2NrIGhpc3RvcmljYWwgZGF0YSBmb3IgZGVtbyBwdXJwb3Nlc1xuZnVuY3Rpb24gZ2VuZXJhdGVNb2NrSGlzdG9yaWNhbERhdGEoZGF5c1RvRXhwaXJhdGlvbikge1xuICBjb25zdCBtb3ZlbWVudHMgPSBbXTtcbiAgY29uc3QgYmFzZVByaWNlID0gMTAwO1xuICBjb25zdCB2b2xhdGlsaXR5ID0gMC4wMjsgLy8gMiUgZGFpbHkgdm9sYXRpbGl0eVxuICAvLyBVc2UgYWxsIGF2YWlsYWJsZSBkYXRhIHBvaW50cywgbm8gYXJiaXRyYXJ5IGxpbWl0c1xuICBjb25zdCBzYW1wbGVzID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDUwMCAtIGRheXNUb0V4cGlyYXRpb24sIDEwMDApKTtcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2FtcGxlczsgaSsrKSB7XG4gICAgbGV0IGN1bXVsYXRpdmVNb3ZlID0gMDtcbiAgICBsZXQgY3VycmVudFByaWNlID0gYmFzZVByaWNlO1xuICAgIFxuICAgIGZvciAobGV0IGRheSA9IDA7IGRheSA8IGRheXNUb0V4cGlyYXRpb247IGRheSsrKSB7XG4gICAgICBjb25zdCByYW5kb21Nb3ZlID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdm9sYXRpbGl0eSAqIDI7XG4gICAgICBjb25zdCBtZWFuUmV2ZXJzaW9uID0gKGJhc2VQcmljZSAtIGN1cnJlbnRQcmljZSkgKiAwLjAwMDU7XG4gICAgICBjb25zdCBkYWlseU1vdmUgPSByYW5kb21Nb3ZlICsgbWVhblJldmVyc2lvbjtcbiAgICAgIFxuICAgICAgY3VtdWxhdGl2ZU1vdmUgKz0gZGFpbHlNb3ZlO1xuICAgICAgY3VycmVudFByaWNlID0gY3VycmVudFByaWNlICogKDEgKyBkYWlseU1vdmUpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSAoc2FtcGxlcyAtIGkpICogMik7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gICAgZW5kRGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpICsgZGF5c1RvRXhwaXJhdGlvbik7XG4gICAgXG4gICAgbW92ZW1lbnRzLnB1c2goe1xuICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICBzdGFydFByaWNlOiBiYXNlUHJpY2UsXG4gICAgICBlbmRQcmljZTogYmFzZVByaWNlICogKDEgKyBjdW11bGF0aXZlTW92ZSksXG4gICAgICBwZXJjZW50TW92ZTogY3VtdWxhdGl2ZU1vdmVcbiAgICB9KTtcbiAgfVxuICBcbiAgcmV0dXJuIG1vdmVtZW50cztcbn1cblxuLy8gQW5hbHl6ZSBwcm9maXRhYmlsaXR5IHNwZWNpZmljYWxseSBmb3IgSXJvbiBDb25kb3Igc3RyYXRlZ3kgKHNpbXBsaWZpZWQgbGlrZSBzdHJhZGRsZSlcbmZ1bmN0aW9uIGFuYWx5emVJcm9uQ29uZG9yUHJvZml0YWJpbGl0eShoaXN0b3JpY2FsRGF0YSwgdXBwZXJCcmVha2V2ZW5QY3QsIGxvd2VyQnJlYWtldmVuUGN0LCBzaG9ydENhbGxTdHJpa2UsIHNob3J0UHV0U3RyaWtlLCBuZXRDcmVkaXQpIHtcbiAgbGV0IGluUHJvZml0Wm9uZUNvdW50ID0gMDtcbiAgbGV0IGFib3ZlVXBwZXJCcmVha2V2ZW5Db3VudCA9IDA7XG4gIGxldCBiZWxvd0xvd2VyQnJlYWtldmVuQ291bnQgPSAwO1xuICBsZXQgdG90YWxWYWxpZFNhbXBsZXMgPSAwO1xuICBcbiAgLy8gRW5zdXJlIHdlIGhhdmUgZGF0YSB0byB3b3JrIHdpdGhcbiAgaWYgKCFoaXN0b3JpY2FsRGF0YSB8fCBoaXN0b3JpY2FsRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5Qcm9maXRab25lOiAwLFxuICAgICAgYWJvdmVVcHBlckJyZWFrZXZlbjogMCxcbiAgICAgIGJlbG93TG93ZXJCcmVha2V2ZW46IDAsXG4gICAgICB0b3RhbFNhbXBsZXM6IDAsXG4gICAgICBwcm9maXRhYmxlUmF0ZTogMCxcbiAgICAgIHVwcGVyQnJlYWtldmVuUGN0OiB1cHBlckJyZWFrZXZlblBjdCAqIDEwMCxcbiAgICAgIGxvd2VyQnJlYWtldmVuUGN0OiBsb3dlckJyZWFrZXZlblBjdCAqIDEwMCxcbiAgICAgIGF2Z01vdmU6IDAsXG4gICAgICBtYXhNb3ZlOiAwLFxuICAgICAgbWluTW92ZTogMCxcbiAgICAgIGRhdGFRdWFsaXR5OiAnbm9uZSdcbiAgICB9O1xuICB9XG4gIFxuICAvLyBGaWx0ZXIgb3V0IGV4dHJlbWUgb3V0bGllcnMgKG1vcmUgdGhhbiA1MCUgbW92ZXMgaW4gZWl0aGVyIGRpcmVjdGlvbikgLSBzYW1lIGFzIHN0cmFkZGxlXG4gIGxldCBmaWx0ZXJlZERhdGEgPSBoaXN0b3JpY2FsRGF0YS5maWx0ZXIobW92ZW1lbnQgPT4ge1xuICAgIGNvbnN0IGFic01vdmUgPSBNYXRoLmFicyhtb3ZlbWVudC5wZXJjZW50TW92ZSk7XG4gICAgcmV0dXJuIGFic01vdmUgPD0gMC41OyAvLyBGaWx0ZXIgb3V0IG1vdmVzID4gNTAlXG4gIH0pO1xuICBcbiAgaWYgKGZpbHRlcmVkRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAvLyBJZiBhbGwgZGF0YSBpcyBmaWx0ZXJlZCBvdXQsIHVzZSBvcmlnaW5hbCBkYXRhXG4gICAgZmlsdGVyZWREYXRhID0gaGlzdG9yaWNhbERhdGE7XG4gIH1cbiAgXG4gIGZpbHRlcmVkRGF0YS5mb3JFYWNoKG1vdmVtZW50ID0+IHtcbiAgICBjb25zdCBwZXJjZW50TW92ZSA9IG1vdmVtZW50LnBlcmNlbnRNb3ZlO1xuICAgIFxuICAgIC8vIElyb24gQ29uZG9yIGlzIHByb2ZpdGFibGUgd2hlbiBwcmljZSBzdGF5cyBiZXR3ZWVuIGJyZWFrZXZlbiBwb2ludHNcbiAgICBpZiAocGVyY2VudE1vdmUgPCB1cHBlckJyZWFrZXZlblBjdCAmJiBwZXJjZW50TW92ZSA+IGxvd2VyQnJlYWtldmVuUGN0KSB7XG4gICAgICBpblByb2ZpdFpvbmVDb3VudCsrO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcmFjayBsb3NzZXMgb3V0c2lkZSBwcm9maXQgem9uZVxuICAgIGlmIChwZXJjZW50TW92ZSA+PSB1cHBlckJyZWFrZXZlblBjdCkge1xuICAgICAgYWJvdmVVcHBlckJyZWFrZXZlbkNvdW50Kys7XG4gICAgfVxuICAgIGlmIChwZXJjZW50TW92ZSA8PSBsb3dlckJyZWFrZXZlblBjdCkge1xuICAgICAgYmVsb3dMb3dlckJyZWFrZXZlbkNvdW50Kys7XG4gICAgfVxuICAgIFxuICAgIHRvdGFsVmFsaWRTYW1wbGVzKys7XG4gIH0pO1xuICBcbiAgY29uc3QgcHJvZml0YWJsZVJhdGUgPSB0b3RhbFZhbGlkU2FtcGxlcyA+IDAgPyAoaW5Qcm9maXRab25lQ291bnQgLyB0b3RhbFZhbGlkU2FtcGxlcykgKiAxMDAgOiAwO1xuICBcbiAgLy8gQ2FsY3VsYXRlIGFkZGl0aW9uYWwgbWV0cmljcyBzYWZlbHkgLSBzYW1lIGFzIHN0cmFkZGxlXG4gIGNvbnN0IGF2Z01vdmUgPSBmaWx0ZXJlZERhdGEubGVuZ3RoID4gMCA/IFxuICAgIGZpbHRlcmVkRGF0YS5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgTWF0aC5hYnMobS5wZXJjZW50TW92ZSksIDApIC8gZmlsdGVyZWREYXRhLmxlbmd0aCA6IDA7XG4gIGNvbnN0IG1heE1vdmUgPSBmaWx0ZXJlZERhdGEubGVuZ3RoID4gMCA/IFxuICAgIE1hdGgubWF4KC4uLmZpbHRlcmVkRGF0YS5tYXAobSA9PiBNYXRoLmFicyhtLnBlcmNlbnRNb3ZlKSkpIDogMDtcbiAgY29uc3QgbWluTW92ZSA9IGZpbHRlcmVkRGF0YS5sZW5ndGggPiAwID8gXG4gICAgTWF0aC5taW4oLi4uZmlsdGVyZWREYXRhLm1hcChtID0+IE1hdGguYWJzKG0ucGVyY2VudE1vdmUpKSkgOiAwO1xuICBcbiAgcmV0dXJuIHtcbiAgICBpblByb2ZpdFpvbmU6IGluUHJvZml0Wm9uZUNvdW50LFxuICAgIGFib3ZlVXBwZXJCcmVha2V2ZW46IGFib3ZlVXBwZXJCcmVha2V2ZW5Db3VudCxcbiAgICBiZWxvd0xvd2VyQnJlYWtldmVuOiBiZWxvd0xvd2VyQnJlYWtldmVuQ291bnQsXG4gICAgdG90YWxTYW1wbGVzOiB0b3RhbFZhbGlkU2FtcGxlcyxcbiAgICBwcm9maXRhYmxlUmF0ZSxcbiAgICB1cHBlckJyZWFrZXZlblBjdDogdXBwZXJCcmVha2V2ZW5QY3QgKiAxMDAsXG4gICAgbG93ZXJCcmVha2V2ZW5QY3Q6IGxvd2VyQnJlYWtldmVuUGN0ICogMTAwLFxuICAgIGF2Z01vdmU6IGF2Z01vdmUgKiAxMDAsXG4gICAgbWF4TW92ZTogbWF4TW92ZSAqIDEwMCxcbiAgICBtaW5Nb3ZlOiBtaW5Nb3ZlICogMTAwLFxuICAgIGRhdGFRdWFsaXR5OiB0b3RhbFZhbGlkU2FtcGxlcyA+PSA1MCA/ICdoaWdoJyA6IHRvdGFsVmFsaWRTYW1wbGVzID49IDIwID8gJ21lZGl1bScgOiB0b3RhbFZhbGlkU2FtcGxlcyA+PSA1ID8gJ2xvdycgOiAnbGltaXRlZCdcbiAgfTtcbn1cblxuIl0sIm5hbWVzIjpbImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ0aWNrZXIiLCJzaG9ydENhbGxTdHJpa2UiLCJzaG9ydFB1dFN0cmlrZSIsImxvbmdDYWxsU3RyaWtlIiwibG9uZ1B1dFN0cmlrZSIsInRvdGFsQ3JlZGl0IiwidG90YWxEZWJpdCIsImN1cnJlbnRQcmljZSIsImRheXNUb0V4cGlyYXRpb24iLCJib2R5IiwiZWZmZWN0aXZlUHJpY2UiLCJuZXRDcmVkaXQiLCJ1cHBlckJyZWFrZXZlbiIsInBhcnNlRmxvYXQiLCJsb3dlckJyZWFrZXZlbiIsInVwcGVyQnJlYWtldmVuUGN0IiwibG93ZXJCcmVha2V2ZW5QY3QiLCJoaXN0b3JpY2FsRGF0YSIsImZldGNoSGlzdG9yaWNhbERhdGEiLCJhbmFseXNpcyIsImFuYWx5emVJcm9uQ29uZG9yUHJvZml0YWJpbGl0eSIsImNvbnNvbGUiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiQUxQSEFfVkFOVEFHRV9BUElfS0VZIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJsb2ciLCJFcnJvciIsImdlbmVyYXRlTW9ja0hpc3RvcmljYWxEYXRhIiwidGltZVNlcmllcyIsImhpc3RvcmljYWxQcmljZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwiZGF0ZSIsInZhbHVlcyIsInByaWNlIiwiZmlsdGVyIiwiaXRlbSIsImlzTmFOIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImxlbmd0aCIsIm1vdmVtZW50cyIsImNhbGN1bGF0ZVByaWNlTW92ZW1lbnRzIiwibWVzc2FnZSIsImkiLCJzdGFydFByaWNlIiwiZW5kUHJpY2UiLCJwZXJjZW50TW92ZSIsInB1c2giLCJzdGFydERhdGUiLCJlbmREYXRlIiwiYmFzZVByaWNlIiwidm9sYXRpbGl0eSIsInNhbXBsZXMiLCJNYXRoIiwibWF4IiwibWluIiwiY3VtdWxhdGl2ZU1vdmUiLCJkYXkiLCJyYW5kb21Nb3ZlIiwicmFuZG9tIiwibWVhblJldmVyc2lvbiIsImRhaWx5TW92ZSIsInNldERhdGUiLCJnZXREYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImluUHJvZml0Wm9uZUNvdW50IiwiYWJvdmVVcHBlckJyZWFrZXZlbkNvdW50IiwiYmVsb3dMb3dlckJyZWFrZXZlbkNvdW50IiwidG90YWxWYWxpZFNhbXBsZXMiLCJpblByb2ZpdFpvbmUiLCJhYm92ZVVwcGVyQnJlYWtldmVuIiwiYmVsb3dMb3dlckJyZWFrZXZlbiIsInRvdGFsU2FtcGxlcyIsInByb2ZpdGFibGVSYXRlIiwiYXZnTW92ZSIsIm1heE1vdmUiLCJtaW5Nb3ZlIiwiZGF0YVF1YWxpdHkiLCJmaWx0ZXJlZERhdGEiLCJtb3ZlbWVudCIsImFic01vdmUiLCJhYnMiLCJmb3JFYWNoIiwicmVkdWNlIiwic3VtIiwibSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/iron-condor-analysis.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Firon-condor-analysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ciron-condor-analysis.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();