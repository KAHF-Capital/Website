"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/darkpool-trades";
exports.ids = ["pages/api/darkpool-trades"];
exports.modules = {

/***/ "csv-parser":
/*!*****************************!*\
  !*** external "csv-parser" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("csv-parser");

/***/ }),

/***/ "csv-writer":
/*!*****************************!*\
  !*** external "csv-writer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("csv-writer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdarkpool-trades&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdarkpool-trades.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdarkpool-trades&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdarkpool-trades.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_darkpool_trades_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\darkpool-trades.js */ \"(api)/./pages/api/darkpool-trades.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_darkpool_trades_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_darkpool_trades_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/darkpool-trades\",\n        pathname: \"/api/darkpool-trades\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_darkpool_trades_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRhcmtwb29sLXRyYWRlcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDZGFya3Bvb2wtdHJhZGVzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzZEO0FBQzdEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2FoZi1jYXBpdGFsLXdlYnNpdGUvPzNlMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxkYXJrcG9vbC10cmFkZXMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kYXJrcG9vbC10cmFkZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXJrcG9vbC10cmFkZXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdarkpool-trades&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdarkpool-trades.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/darkpool-trades.js":
/*!**************************************!*\
  !*** ./pages/api/darkpool-trades.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst csv = __webpack_require__(/*! csv-parser */ \"csv-parser\");\nconst createCsvWriter = (__webpack_require__(/*! csv-writer */ \"csv-writer\").createObjectCsvWriter);\n// Data directory for CSV files\nconst DATA_DIR = path.join(process.cwd(), \"data\");\nconst DAILY_CSV_DIR = path.join(DATA_DIR, \"daily\");\nconst HISTORICAL_CSV_PATH = path.join(DATA_DIR, \"darkpool_history.csv\");\n// Ensure directories exist\nfunction ensureDirectories() {\n    if (!fs.existsSync(DATA_DIR)) {\n        fs.mkdirSync(DATA_DIR, {\n            recursive: true\n        });\n    }\n    if (!fs.existsSync(DAILY_CSV_DIR)) {\n        fs.mkdirSync(DAILY_CSV_DIR, {\n            recursive: true\n        });\n    }\n}\n// Parse CSV file and extract dark pool trades with memory limits\nfunction parseDarkPoolTrades(csvFilePath) {\n    return new Promise((resolve, reject)=>{\n        const darkPoolTrades = [];\n        let rowCount = 0;\n        const MAX_ROWS = 100000; // Limit to 100k rows to prevent memory issues\n        fs.createReadStream(csvFilePath).pipe(csv()).on(\"data\", (row)=>{\n            rowCount++;\n            // Stop processing if we hit the limit\n            if (rowCount > MAX_ROWS) {\n                console.log(`Reached row limit (${MAX_ROWS}), stopping processing`);\n                return;\n            }\n            // Check if this is a dark pool trade\n            // Dark pool trades have exchange = 4 AND trf_id present\n            if (row.exchange === \"4\" && row.trf_id && row.trf_id.trim() !== \"\") {\n                darkPoolTrades.push({\n                    ticker: row.ticker || row.symbol || \"UNKNOWN\",\n                    volume: parseInt(row.size || row.volume || 0),\n                    price: parseFloat(row.price || row.p || 0),\n                    timestamp: row.timestamp || row.t || new Date().toISOString(),\n                    exchange: row.exchange,\n                    trf_id: row.trf_id\n                });\n            }\n        }).on(\"end\", ()=>{\n            console.log(`Processed ${rowCount} rows, found ${darkPoolTrades.length} dark pool trades`);\n            resolve(darkPoolTrades);\n        }).on(\"error\", (error)=>{\n            reject(error);\n        });\n    });\n}\n// Group dark pool trades by ticker and calculate totals\nfunction groupTradesByTicker(trades) {\n    const tickerMap = {};\n    trades.forEach((trade)=>{\n        const ticker = trade.ticker.toUpperCase();\n        if (!tickerMap[ticker]) {\n            tickerMap[ticker] = {\n                ticker: ticker,\n                total_volume: 0,\n                trade_count: 0,\n                avg_price: 0,\n                total_value: 0\n            };\n        }\n        tickerMap[ticker].total_volume += trade.volume;\n        tickerMap[ticker].trade_count += 1;\n        tickerMap[ticker].total_value += trade.volume * trade.price;\n    });\n    // Calculate average price\n    Object.values(tickerMap).forEach((tickerData)=>{\n        tickerData.avg_price = tickerData.total_value / tickerData.total_volume;\n    });\n    // Convert to array and sort by volume\n    return Object.values(tickerMap).sort((a, b)=>b.total_volume - a.total_volume);\n}\n// Save dark pool data to historical CSV\nfunction saveToHistoricalCSV(trades, date) {\n    const csvWriter = createCsvWriter({\n        path: HISTORICAL_CSV_PATH,\n        header: [\n            {\n                id: \"date\",\n                title: \"DATE\"\n            },\n            {\n                id: \"ticker\",\n                title: \"TICKER\"\n            },\n            {\n                id: \"total_volume\",\n                title: \"TOTAL_VOLUME\"\n            },\n            {\n                id: \"trade_count\",\n                title: \"TRADE_COUNT\"\n            },\n            {\n                id: \"avg_price\",\n                title: \"AVG_PRICE\"\n            },\n            {\n                id: \"total_value\",\n                title: \"TOTAL_VALUE\"\n            }\n        ],\n        append: fs.existsSync(HISTORICAL_CSV_PATH)\n    });\n    const records = trades.map((trade)=>({\n            date: date,\n            ticker: trade.ticker,\n            total_volume: trade.total_volume,\n            trade_count: trade.trade_count,\n            avg_price: trade.avg_price.toFixed(2),\n            total_value: trade.total_value.toFixed(2)\n        }));\n    return csvWriter.writeRecords(records);\n}\n// Get latest CSV file from daily directory\nfunction getLatestCSVFile() {\n    const files = fs.readdirSync(DAILY_CSV_DIR).filter((file)=>file.endsWith(\".csv\")).map((file)=>({\n            name: file,\n            path: path.join(DAILY_CSV_DIR, file),\n            mtime: fs.statSync(path.join(DAILY_CSV_DIR, file)).mtime\n        })).sort((a, b)=>b.mtime - a.mtime);\n    return files.length > 0 ? files[0] : null;\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        ensureDirectories();\n        const { save = \"false\" } = req.query;\n        const currentDate = new Date().toISOString().split(\"T\")[0];\n        // Get the latest CSV file\n        const latestFile = getLatestCSVFile();\n        if (!latestFile) {\n            return res.status(404).json({\n                error: \"No CSV files found\",\n                message: `Please upload a CSV file to the ${DAILY_CSV_DIR} directory`,\n                instructions: [\n                    \"1. Download your Polygon.io CSV file\",\n                    \"2. Upload it to the data/daily folder\",\n                    \"3. Refresh this page to analyze the data\"\n                ]\n            });\n        }\n        console.log(`Processing CSV file: ${latestFile.name}`);\n        // Parse the CSV file\n        const darkPoolTrades = await parseDarkPoolTrades(latestFile.path);\n        if (darkPoolTrades.length === 0) {\n            return res.status(200).json({\n                date: currentDate,\n                trades: [],\n                total_tickers: 0,\n                last_updated: new Date().toISOString(),\n                message: \"No dark pool trades found in the CSV file\",\n                file_processed: latestFile.name\n            });\n        }\n        // Group trades by ticker\n        const groupedTrades = groupTradesByTicker(darkPoolTrades);\n        // Save to historical CSV if requested\n        if (save === \"true\") {\n            try {\n                await saveToHistoricalCSV(groupedTrades, currentDate);\n                console.log(`Saved ${groupedTrades.length} tickers to historical CSV`);\n            } catch (error) {\n                console.error(\"Error saving to historical CSV:\", error);\n            }\n        }\n        return res.status(200).json({\n            date: currentDate,\n            trades: groupedTrades,\n            total_tickers: groupedTrades.length,\n            total_trades: darkPoolTrades.length,\n            last_updated: new Date().toISOString(),\n            file_processed: latestFile.name,\n            file_date: latestFile.mtime.toISOString(),\n            saved_to_history: save === \"true\"\n        });\n    } catch (error) {\n        console.error(\"Error processing CSV:\", error);\n        return res.status(500).json({\n            error: \"Error processing CSV file\",\n            details:  true ? error.message : 0\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBeUJBO1FBQ3ZDLE9BQU91QyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCMUMsT0FBTztZQUNQeUQsU0FBU2hHLEtBQXlCLEdBQWdCdUMsTUFBTWdELE9BQU8sR0FBRztRQUNwRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYWhmLWNhcGl0YWwtd2Vic2l0ZS8uL3BhZ2VzL2FwaS9kYXJrcG9vbC10cmFkZXMuanM/YmQ5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgY3N2ID0gcmVxdWlyZSgnY3N2LXBhcnNlcicpO1xuY29uc3QgY3JlYXRlQ3N2V3JpdGVyID0gcmVxdWlyZSgnY3N2LXdyaXRlcicpLmNyZWF0ZU9iamVjdENzdldyaXRlcjtcblxuLy8gRGF0YSBkaXJlY3RvcnkgZm9yIENTViBmaWxlc1xuY29uc3QgREFUQV9ESVIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKTtcbmNvbnN0IERBSUxZX0NTVl9ESVIgPSBwYXRoLmpvaW4oREFUQV9ESVIsICdkYWlseScpO1xuY29uc3QgSElTVE9SSUNBTF9DU1ZfUEFUSCA9IHBhdGguam9pbihEQVRBX0RJUiwgJ2Rhcmtwb29sX2hpc3RvcnkuY3N2Jyk7XG5cbi8vIEVuc3VyZSBkaXJlY3RvcmllcyBleGlzdFxuZnVuY3Rpb24gZW5zdXJlRGlyZWN0b3JpZXMoKSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhEQVRBX0RJUikpIHtcbiAgICBmcy5ta2RpclN5bmMoREFUQV9ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICB9XG4gIGlmICghZnMuZXhpc3RzU3luYyhEQUlMWV9DU1ZfRElSKSkge1xuICAgIGZzLm1rZGlyU3luYyhEQUlMWV9DU1ZfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgfVxufVxuXG4vLyBQYXJzZSBDU1YgZmlsZSBhbmQgZXh0cmFjdCBkYXJrIHBvb2wgdHJhZGVzIHdpdGggbWVtb3J5IGxpbWl0c1xuZnVuY3Rpb24gcGFyc2VEYXJrUG9vbFRyYWRlcyhjc3ZGaWxlUGF0aCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGRhcmtQb29sVHJhZGVzID0gW107XG4gICAgbGV0IHJvd0NvdW50ID0gMDtcbiAgICBjb25zdCBNQVhfUk9XUyA9IDEwMDAwMDsgLy8gTGltaXQgdG8gMTAwayByb3dzIHRvIHByZXZlbnQgbWVtb3J5IGlzc3Vlc1xuICAgIFxuICAgIGZzLmNyZWF0ZVJlYWRTdHJlYW0oY3N2RmlsZVBhdGgpXG4gICAgICAucGlwZShjc3YoKSlcbiAgICAgIC5vbignZGF0YScsIChyb3cpID0+IHtcbiAgICAgICAgcm93Q291bnQrKztcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3AgcHJvY2Vzc2luZyBpZiB3ZSBoaXQgdGhlIGxpbWl0XG4gICAgICAgIGlmIChyb3dDb3VudCA+IE1BWF9ST1dTKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFJlYWNoZWQgcm93IGxpbWl0ICgke01BWF9ST1dTfSksIHN0b3BwaW5nIHByb2Nlc3NpbmdgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkYXJrIHBvb2wgdHJhZGVcbiAgICAgICAgLy8gRGFyayBwb29sIHRyYWRlcyBoYXZlIGV4Y2hhbmdlID0gNCBBTkQgdHJmX2lkIHByZXNlbnRcbiAgICAgICAgaWYgKHJvdy5leGNoYW5nZSA9PT0gJzQnICYmIHJvdy50cmZfaWQgJiYgcm93LnRyZl9pZC50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgZGFya1Bvb2xUcmFkZXMucHVzaCh7XG4gICAgICAgICAgICB0aWNrZXI6IHJvdy50aWNrZXIgfHwgcm93LnN5bWJvbCB8fCAnVU5LTk9XTicsXG4gICAgICAgICAgICB2b2x1bWU6IHBhcnNlSW50KHJvdy5zaXplIHx8IHJvdy52b2x1bWUgfHwgMCksXG4gICAgICAgICAgICBwcmljZTogcGFyc2VGbG9hdChyb3cucHJpY2UgfHwgcm93LnAgfHwgMCksXG4gICAgICAgICAgICB0aW1lc3RhbXA6IHJvdy50aW1lc3RhbXAgfHwgcm93LnQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgZXhjaGFuZ2U6IHJvdy5leGNoYW5nZSxcbiAgICAgICAgICAgIHRyZl9pZDogcm93LnRyZl9pZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzZWQgJHtyb3dDb3VudH0gcm93cywgZm91bmQgJHtkYXJrUG9vbFRyYWRlcy5sZW5ndGh9IGRhcmsgcG9vbCB0cmFkZXNgKTtcbiAgICAgICAgcmVzb2x2ZShkYXJrUG9vbFRyYWRlcyk7XG4gICAgICB9KVxuICAgICAgLm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gIH0pO1xufVxuXG4vLyBHcm91cCBkYXJrIHBvb2wgdHJhZGVzIGJ5IHRpY2tlciBhbmQgY2FsY3VsYXRlIHRvdGFsc1xuZnVuY3Rpb24gZ3JvdXBUcmFkZXNCeVRpY2tlcih0cmFkZXMpIHtcbiAgY29uc3QgdGlja2VyTWFwID0ge307XG4gIFxuICB0cmFkZXMuZm9yRWFjaCh0cmFkZSA9PiB7XG4gICAgY29uc3QgdGlja2VyID0gdHJhZGUudGlja2VyLnRvVXBwZXJDYXNlKCk7XG4gICAgaWYgKCF0aWNrZXJNYXBbdGlja2VyXSkge1xuICAgICAgdGlja2VyTWFwW3RpY2tlcl0gPSB7XG4gICAgICAgIHRpY2tlcjogdGlja2VyLFxuICAgICAgICB0b3RhbF92b2x1bWU6IDAsXG4gICAgICAgIHRyYWRlX2NvdW50OiAwLFxuICAgICAgICBhdmdfcHJpY2U6IDAsXG4gICAgICAgIHRvdGFsX3ZhbHVlOiAwXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICB0aWNrZXJNYXBbdGlja2VyXS50b3RhbF92b2x1bWUgKz0gdHJhZGUudm9sdW1lO1xuICAgIHRpY2tlck1hcFt0aWNrZXJdLnRyYWRlX2NvdW50ICs9IDE7XG4gICAgdGlja2VyTWFwW3RpY2tlcl0udG90YWxfdmFsdWUgKz0gdHJhZGUudm9sdW1lICogdHJhZGUucHJpY2U7XG4gIH0pO1xuICBcbiAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgcHJpY2VcbiAgT2JqZWN0LnZhbHVlcyh0aWNrZXJNYXApLmZvckVhY2godGlja2VyRGF0YSA9PiB7XG4gICAgdGlja2VyRGF0YS5hdmdfcHJpY2UgPSB0aWNrZXJEYXRhLnRvdGFsX3ZhbHVlIC8gdGlja2VyRGF0YS50b3RhbF92b2x1bWU7XG4gIH0pO1xuICBcbiAgLy8gQ29udmVydCB0byBhcnJheSBhbmQgc29ydCBieSB2b2x1bWVcbiAgcmV0dXJuIE9iamVjdC52YWx1ZXModGlja2VyTWFwKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnRvdGFsX3ZvbHVtZSAtIGEudG90YWxfdm9sdW1lKTtcbn1cblxuLy8gU2F2ZSBkYXJrIHBvb2wgZGF0YSB0byBoaXN0b3JpY2FsIENTVlxuZnVuY3Rpb24gc2F2ZVRvSGlzdG9yaWNhbENTVih0cmFkZXMsIGRhdGUpIHtcbiAgY29uc3QgY3N2V3JpdGVyID0gY3JlYXRlQ3N2V3JpdGVyKHtcbiAgICBwYXRoOiBISVNUT1JJQ0FMX0NTVl9QQVRILFxuICAgIGhlYWRlcjogW1xuICAgICAgeyBpZDogJ2RhdGUnLCB0aXRsZTogJ0RBVEUnIH0sXG4gICAgICB7IGlkOiAndGlja2VyJywgdGl0bGU6ICdUSUNLRVInIH0sXG4gICAgICB7IGlkOiAndG90YWxfdm9sdW1lJywgdGl0bGU6ICdUT1RBTF9WT0xVTUUnIH0sXG4gICAgICB7IGlkOiAndHJhZGVfY291bnQnLCB0aXRsZTogJ1RSQURFX0NPVU5UJyB9LFxuICAgICAgeyBpZDogJ2F2Z19wcmljZScsIHRpdGxlOiAnQVZHX1BSSUNFJyB9LFxuICAgICAgeyBpZDogJ3RvdGFsX3ZhbHVlJywgdGl0bGU6ICdUT1RBTF9WQUxVRScgfVxuICAgIF0sXG4gICAgYXBwZW5kOiBmcy5leGlzdHNTeW5jKEhJU1RPUklDQUxfQ1NWX1BBVEgpXG4gIH0pO1xuICBcbiAgY29uc3QgcmVjb3JkcyA9IHRyYWRlcy5tYXAodHJhZGUgPT4gKHtcbiAgICBkYXRlOiBkYXRlLFxuICAgIHRpY2tlcjogdHJhZGUudGlja2VyLFxuICAgIHRvdGFsX3ZvbHVtZTogdHJhZGUudG90YWxfdm9sdW1lLFxuICAgIHRyYWRlX2NvdW50OiB0cmFkZS50cmFkZV9jb3VudCxcbiAgICBhdmdfcHJpY2U6IHRyYWRlLmF2Z19wcmljZS50b0ZpeGVkKDIpLFxuICAgIHRvdGFsX3ZhbHVlOiB0cmFkZS50b3RhbF92YWx1ZS50b0ZpeGVkKDIpXG4gIH0pKTtcbiAgXG4gIHJldHVybiBjc3ZXcml0ZXIud3JpdGVSZWNvcmRzKHJlY29yZHMpO1xufVxuXG4vLyBHZXQgbGF0ZXN0IENTViBmaWxlIGZyb20gZGFpbHkgZGlyZWN0b3J5XG5mdW5jdGlvbiBnZXRMYXRlc3RDU1ZGaWxlKCkge1xuICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKERBSUxZX0NTVl9ESVIpXG4gICAgLmZpbHRlcihmaWxlID0+IGZpbGUuZW5kc1dpdGgoJy5jc3YnKSlcbiAgICAubWFwKGZpbGUgPT4gKHtcbiAgICAgIG5hbWU6IGZpbGUsXG4gICAgICBwYXRoOiBwYXRoLmpvaW4oREFJTFlfQ1NWX0RJUiwgZmlsZSksXG4gICAgICBtdGltZTogZnMuc3RhdFN5bmMocGF0aC5qb2luKERBSUxZX0NTVl9ESVIsIGZpbGUpKS5tdGltZVxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLm10aW1lIC0gYS5tdGltZSk7XG4gIFxuICByZXR1cm4gZmlsZXMubGVuZ3RoID4gMCA/IGZpbGVzWzBdIDogbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGVuc3VyZURpcmVjdG9yaWVzKCk7XG4gICAgXG4gICAgY29uc3QgeyBzYXZlID0gJ2ZhbHNlJyB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgXG4gICAgLy8gR2V0IHRoZSBsYXRlc3QgQ1NWIGZpbGVcbiAgICBjb25zdCBsYXRlc3RGaWxlID0gZ2V0TGF0ZXN0Q1NWRmlsZSgpO1xuICAgIFxuICAgIGlmICghbGF0ZXN0RmlsZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgZXJyb3I6ICdObyBDU1YgZmlsZXMgZm91bmQnLFxuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIHVwbG9hZCBhIENTViBmaWxlIHRvIHRoZSAke0RBSUxZX0NTVl9ESVJ9IGRpcmVjdG9yeWAsXG4gICAgICAgIGluc3RydWN0aW9uczogW1xuICAgICAgICAgICcxLiBEb3dubG9hZCB5b3VyIFBvbHlnb24uaW8gQ1NWIGZpbGUnLFxuICAgICAgICAgICcyLiBVcGxvYWQgaXQgdG8gdGhlIGRhdGEvZGFpbHkgZm9sZGVyJyxcbiAgICAgICAgICAnMy4gUmVmcmVzaCB0aGlzIHBhZ2UgdG8gYW5hbHl6ZSB0aGUgZGF0YSdcbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIENTViBmaWxlOiAke2xhdGVzdEZpbGUubmFtZX1gKTtcbiAgICBcbiAgICAvLyBQYXJzZSB0aGUgQ1NWIGZpbGVcbiAgICBjb25zdCBkYXJrUG9vbFRyYWRlcyA9IGF3YWl0IHBhcnNlRGFya1Bvb2xUcmFkZXMobGF0ZXN0RmlsZS5wYXRoKTtcbiAgICBcbiAgICBpZiAoZGFya1Bvb2xUcmFkZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBkYXRlOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgdHJhZGVzOiBbXSxcbiAgICAgICAgdG90YWxfdGlja2VyczogMCxcbiAgICAgICAgbGFzdF91cGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1lc3NhZ2U6ICdObyBkYXJrIHBvb2wgdHJhZGVzIGZvdW5kIGluIHRoZSBDU1YgZmlsZScsXG4gICAgICAgIGZpbGVfcHJvY2Vzc2VkOiBsYXRlc3RGaWxlLm5hbWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBHcm91cCB0cmFkZXMgYnkgdGlja2VyXG4gICAgY29uc3QgZ3JvdXBlZFRyYWRlcyA9IGdyb3VwVHJhZGVzQnlUaWNrZXIoZGFya1Bvb2xUcmFkZXMpO1xuICAgIFxuICAgIC8vIFNhdmUgdG8gaGlzdG9yaWNhbCBDU1YgaWYgcmVxdWVzdGVkXG4gICAgaWYgKHNhdmUgPT09ICd0cnVlJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgc2F2ZVRvSGlzdG9yaWNhbENTVihncm91cGVkVHJhZGVzLCBjdXJyZW50RGF0ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTYXZlZCAke2dyb3VwZWRUcmFkZXMubGVuZ3RofSB0aWNrZXJzIHRvIGhpc3RvcmljYWwgQ1NWYCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgdG8gaGlzdG9yaWNhbCBDU1Y6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgZGF0ZTogY3VycmVudERhdGUsXG4gICAgICB0cmFkZXM6IGdyb3VwZWRUcmFkZXMsXG4gICAgICB0b3RhbF90aWNrZXJzOiBncm91cGVkVHJhZGVzLmxlbmd0aCxcbiAgICAgIHRvdGFsX3RyYWRlczogZGFya1Bvb2xUcmFkZXMubGVuZ3RoLFxuICAgICAgbGFzdF91cGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBmaWxlX3Byb2Nlc3NlZDogbGF0ZXN0RmlsZS5uYW1lLFxuICAgICAgZmlsZV9kYXRlOiBsYXRlc3RGaWxlLm10aW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICBzYXZlZF90b19oaXN0b3J5OiBzYXZlID09PSAndHJ1ZSdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgQ1NWOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIGVycm9yOiAnRXJyb3IgcHJvY2Vzc2luZyBDU1YgZmlsZScsXG4gICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVycm9yLm1lc3NhZ2UgOiAnUGxlYXNlIGNoZWNrIHRoZSBDU1YgZmlsZSBmb3JtYXQnXG4gICAgfSk7XG4gIH1cbn1cblxuXG4iXSwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsImNzdiIsImNyZWF0ZUNzdldyaXRlciIsImNyZWF0ZU9iamVjdENzdldyaXRlciIsIkRBVEFfRElSIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJEQUlMWV9DU1ZfRElSIiwiSElTVE9SSUNBTF9DU1ZfUEFUSCIsImVuc3VyZURpcmVjdG9yaWVzIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsInBhcnNlRGFya1Bvb2xUcmFkZXMiLCJjc3ZGaWxlUGF0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGFya1Bvb2xUcmFkZXMiLCJyb3dDb3VudCIsIk1BWF9ST1dTIiwiY3JlYXRlUmVhZFN0cmVhbSIsInBpcGUiLCJvbiIsInJvdyIsImNvbnNvbGUiLCJsb2ciLCJleGNoYW5nZSIsInRyZl9pZCIsInRyaW0iLCJwdXNoIiwidGlja2VyIiwic3ltYm9sIiwidm9sdW1lIiwicGFyc2VJbnQiLCJzaXplIiwicHJpY2UiLCJwYXJzZUZsb2F0IiwicCIsInRpbWVzdGFtcCIsInQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJsZW5ndGgiLCJlcnJvciIsImdyb3VwVHJhZGVzQnlUaWNrZXIiLCJ0cmFkZXMiLCJ0aWNrZXJNYXAiLCJmb3JFYWNoIiwidHJhZGUiLCJ0b1VwcGVyQ2FzZSIsInRvdGFsX3ZvbHVtZSIsInRyYWRlX2NvdW50IiwiYXZnX3ByaWNlIiwidG90YWxfdmFsdWUiLCJPYmplY3QiLCJ2YWx1ZXMiLCJ0aWNrZXJEYXRhIiwic29ydCIsImEiLCJiIiwic2F2ZVRvSGlzdG9yaWNhbENTViIsImRhdGUiLCJjc3ZXcml0ZXIiLCJoZWFkZXIiLCJpZCIsInRpdGxlIiwiYXBwZW5kIiwicmVjb3JkcyIsIm1hcCIsInRvRml4ZWQiLCJ3cml0ZVJlY29yZHMiLCJnZXRMYXRlc3RDU1ZGaWxlIiwiZmlsZXMiLCJyZWFkZGlyU3luYyIsImZpbHRlciIsImZpbGUiLCJlbmRzV2l0aCIsIm5hbWUiLCJtdGltZSIsInN0YXRTeW5jIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJzYXZlIiwicXVlcnkiLCJjdXJyZW50RGF0ZSIsInNwbGl0IiwibGF0ZXN0RmlsZSIsIm1lc3NhZ2UiLCJpbnN0cnVjdGlvbnMiLCJ0b3RhbF90aWNrZXJzIiwibGFzdF91cGRhdGVkIiwiZmlsZV9wcm9jZXNzZWQiLCJncm91cGVkVHJhZGVzIiwidG90YWxfdHJhZGVzIiwiZmlsZV9kYXRlIiwic2F2ZWRfdG9faGlzdG9yeSIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/darkpool-trades.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdarkpool-trades&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdarkpool-trades.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();